GERARCHIA (Root: final)

.
├── docker-compose.yaml
├── backend/
│   ├── package.json
│   └── src/
│       ├── index.js
│       ├── upload.js
│       ├── uploadDate.js
│       ├── controllers/
│       │   ├── adminController.js
│       │   ├── lessonController.js
│       │   ├── reportController.js
│       │   ├── reviewController.js
│       │   └── userController.js
│       ├── models/
│       │   ├── adminModel.js
│       │   ├── lessonModel.js
│       │   ├── reportModel.js
│       │   ├── reviewModel.js
│       │   └── userModel.js
│       └── routes/
│           ├── adminRouter.js
│           ├── lessonRouter.js
│           ├── reportRouter.js
│           ├── reviewRouter.js
│           └── userRouter.js
└── frontend/
    ├── index.html
    ├── package.json
    ├── vite.config.js
    └── src/
        ├── App.vue
        ├── main.js
        ├── style.css
        ├── assets/
        │   ├── css/
        │   │   ├── access.css
        │   │   ├── base.css
        │   │   ├── components.css
        │   │   ├── darkmode.css
        │   │   ├── footer.css
        │   │   ├── header.css
        │   │   ├── lezionidiuser.css
        │   │   ├── modal.css
        │   │   ├── profilo.css
        │   │   ├── segnala.css
        │   │   ├── sidebar.css
        │   │   └── style.css
        │   └── styles/
        │       ├── access-page.css
        │       └── base.css
        ├── components/
        │   ├── AppHeader.vue
        │   ├── BanDialog.vue
        │   ├── BookingDialog.vue
        │   ├── CreateReportDialog.vue
        │   ├── CreateReviewDialog.vue
        │   ├── EditLessonDialog.vue
        │   ├── EditProfileDialog.vue
        │   ├── FooterNote.vue
        │   ├── LessonCard.vue
        │   ├── PersonalProfile.vue
        │   ├── PublicProfile.vue
        │   ├── PublishDialog.vue
        │   ├── ReportCard.vue
        │   ├── ReviewCard.vue
        │   ├── SidebarFilters.vue
        │   └── ToastNotification.vue
        ├── composables/
        │   ├── auth.js
        │   └── useDarkMode.js
        ├── plugins/
        │   └── socket.js
        ├── routes/
        │   └── router.js
        └── views/
            ├── BookedView.vue
            ├── HomeView.vue
            ├── LoginView.vue
            ├── OfferedView.vue
            ├── ProfileView.vue
            ├── RegisterView.vue
            └── ReporterView.vue

==================================================

FILE: docker-compose.yaml
--------------------
version: "3.9"

services:
  frontend:
    build: ./frontend
    ports:
      - "8080:8080"
    depends_on:
      - backend
    networks:
      - app-network

  backend:
    build: ./backend
    ports:
      - "4000:4000"
    environment:
      - PORT=4000
      - MONGO_URI=mongodb://mongodb:27017/tutoring
      - JWT_SECRET=supersegreto
      - JWT_EXPIRES=24h
    depends_on:
      - mongodb
    networks:
      - app-network

  mongodb:
    image: mongo:6
    container_name: mongodb
    restart: always
    ports:
      - "27017:27017"
    volumes:
      - ./mongo-init:/docker-entrypoint-initdb.d
    networks:
      - app-network

networks:
  app-network:

volumes:
  mongo-data:


==================================================

FILE: backend\package.json
--------------------
{
  "name": "tutoring-backend",
  "version": "1.0.0",
  "description": "Backend per tutoring con Express, MongoDB e Socket.io",
  "main": "src/index.js",
  "type": "commonjs",
  "scripts": {
    "start": "node src/index.js",
    "dev": "nodemon src/index.js"
  },
  "dependencies": {
    "uuid": "^9.0.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.1",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.2",
    "mongoose": "^7.6.0",
    "socket.io": "^4.7.5",
    "bcrypt": "^5.1.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.3"
  }
}


==================================================

FILE: backend\src\index.js
--------------------
require("dotenv").config();

const express = require("express");
const http = require("http");
const { Server } = require("socket.io");
const mongoose = require("mongoose");
const cors = require("cors");

const User = require("./models/userModel");
const Lesson = require("./models/lessonModel");
const Review  = require("./models/reviewModel");
const Admin  = require("./models/adminModel");
const Report  = require("./models/reportModel");
const path = require("path");

const { users, lessons, reviews, admins, reports } = require("./uploadDate");

const bcrypt = require("bcrypt");

async function hashPassword(password) {
  return await bcrypt.hash(password, 10);
}

const app = express();
app.use(cors());
app.use(express.json());
app.use("/uploads", express.static(path.join(__dirname, "../uploads")));


const server = http.createServer(app);

const io = new Server(server, {
  cors: {
    origin: "*",
    methods: ["GET", "POST"]
  }
});

const MONGO_URI = process.env.MONGO_URI || "mongodb://mongodb:27017/tutoring";

mongoose
  .connect(MONGO_URI)
  .then(async () => {

    const usersWithHashedPasswords = await Promise.all(
      users.map(async user => ({
        ...user,
        password: await hashPassword(user.password),
      }))
    );
    await User.insertMany(usersWithHashedPasswords);
    await Lesson.insertMany(lessons);
    await Review.insertMany(reviews); 
    await Admin.insertMany(admins);
    await Report.insertMany(reports);

    const userCount = await User.countDocuments();

    const lessonCount = await Lesson.countDocuments();

    const reviewCount = await Review.countDocuments();

    const adminCount = await Admin.countDocuments();

    const reportCount = await Report.countDocuments();
  })
  .catch((err) => console.error("MongoDB error:", err));

io.on("connection", (socket) => {
  const jwtSettings = {
    secret: process.env.JWT_SECRET,
    expires: process.env.JWT_EXPIRES
  };

  require("./routes/userRouter")(socket, io, jwtSettings);
  require("./routes/lessonRouter")(socket, io);
  require("./routes/reviewRouter")(socket, io);
  require("./routes/reportRouter")(socket, io, jwtSettings);
  require("./routes/adminRouter")(socket, io, jwtSettings);

  socket.on("disconnect", () => {
    console.log("Client disconnesso:", socket.id);
  });
});

const PORT = process.env.PORT || 4000;
server.listen(PORT, () => {
});



==================================================

FILE: backend\src\upload.js
--------------------
const multer = require("multer");
const path = require("path");

const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, "uploads/"); 
  },
  filename: (req, file, cb) => {
    const uniqueName = Date.now() + "-" + Math.round(Math.random() * 1e9);
    cb(null, uniqueName + path.extname(file.originalname));
  }
});

const upload = multer({ storage });

module.exports = upload;


==================================================

FILE: backend\src\uploadDate.js
--------------------
const crypto = require("crypto");

/* Funzione per hashare le password
function hashPassword(password) {
  return crypto.createHash("sha256").update(password).digest("hex");
}*/



// Array di utenti
const users = [
  {
    id: "user-1",
    firstName: "Daniele",
    lastName: "Capannini",
    email: "daniele.capannini@studio.unibo.it",
    password: "Password01!",
    degreeType: "magistrale",
    photo: null,
    birthDate: new Date("1999-05-21"),
    averageGrade: 28,
    bio: "Studente appassionato di informatica."
  },
  {
    id: "user-2",
    firstName: "Giulia",
    lastName: "Rossi",
    email: "giulia.rossi@studio.unibo.it",
    password: "Password02!",
    degreeType: "triennale",
    photo: null,
    birthDate: new Date("2001-08-10"),
    averageGrade: 27,
    bio: "Studentessa magistrale in ingegneria."
  },
  {
    id: "user-3",
    firstName: "Luca",
    lastName: "Bianchi",
    email: "luca.bianchi@studio.unibo.it",
    password: "Password03!",
    degreeType: "dottorato",
    photo: null,
    birthDate: new Date("1995-02-14"),
    averageGrade: 30,
    bio: "Dottorando in matematica applicata."
  },
  {
    id: "user-4",
    firstName: "Daniel",
    lastName: "Capannini",
    email: "daniel.capannini@studio.unibo.it",
    password: "Password01!",  
    degreeType: "magistrale",
    photo: null,
    birthDate: new Date("2001-04-12"),
    averageGrade: 30,
    bio: "proprietario di sta app."
  },
  {
    id: "user-5",
    firstName: "Luca",
    lastName: "Cantagallo",
    email: "luca.cantagallo@studio.unibo.it",
    password: "Password01!",
    degreeType: "magistrale",
    photo: null,
    birthDate: new Date("2001-04-12"),
    averageGrade: 30,
    bio: "proprietario di sta app."
  }
];

const admins = [{
      emailAdmin: "daniel.capannini@studio.unibo.it"
    },
    {
      emailAdmin: "luca.cantagallo@studio.unibo.it"
    }
];

// Array di lezioni
const lessons = [
  {
    id: "lesson-1",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "9:00",
    subject: "Analisi",
    date: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000), // tra 3 giorni
    duration: 60,
    price: 20,
    status: "available",
    notes: "Introduzione ai limiti e derivate."
  },
  {
    id: "lesson-2",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "10:00",
    subject: "Ingegneria del software",
    date: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000), // tra 5 giorni
    duration: 90,
    price: 30,
    status: "available",
    notes: "Design pattern e principi SOLID."
  },
  {
    id: "lesson-3",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "11:00",
    subject: "Basi di Dati",
    date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // tra 7 giorni
    duration: 60,
    price: 25,
    status: "available",
    notes: "Esercitazione sulle query SQL."
  },
  {
    id: "lesson-4",
    teacher: "luca.bianchi@studio.unibo.it",
    student: null,
    time: "9:30",
    subject: "Algebra e Geometria",
    date: new Date(Date.now() + 9 * 24 * 60 * 60 * 1000),
    duration: 60,
    price: 22,
    status: "available",
    notes: "Grafi e combinatoria di base."
  },
  {
    id: "lesson-5",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "10:30",
    subject: "Algoritmi",
    date: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000),
    duration: 90,
    price: 35,
    status: "available",
    notes: "Analisi della complessità e tecniche di programmazione dinamica."
  },
  {
    id: "lesson-6",
    teacher: "luca.cantagallo@studio.unibo.it",
    student: null,
    time: "11:30",
    subject: "Reti di Calcolatori",
    date: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000),
    duration: 60,
    price: 25,
    status: "available",
    notes: "Livelli OSI e protocolli TCP/IP."
  },
  {
    id: "lesson-7",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "12:00",
    subject: "Programmazione Web",
    date: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000),
    duration: 120,
    price: 40,
    status: "available",
    notes: "Introduzione a Node.js e Express."
  },
  {
    id: "lesson-8",
    teacher: "luca.bianchi@studio.unibo.it",
    student: null,
    time: "13:00",
    subject: "Algoritmi",
    date: new Date(Date.now() + 13 * 24 * 60 * 60 * 1000),
    duration: 60,
    price: 28,
    status: "available",
    notes: "Metodi iterativi per sistemi lineari."
  },
  {
    id: "lesson-9",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "14:00",
    subject: "Ingegneria del software",
    date: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000),
    duration: 90,
    price: 30,
    status: "available",
    notes: "Test driven development (TDD)."
  },
  {
    id: "lesson-10",
    teacher: "luca.cantagallo@studio.unibo.it",
    student: null,
    time: "15:00",
    subject: "Sistemi Operativi",
    date: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000),
    duration: 60,
    price: 26,
    status: "available",
    notes: "Scheduling e gestione della memoria."
  },
  {
    id: "lesson-11",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "16:00",
    subject: "Basi di Dati",
    date: new Date(Date.now() + 16 * 24 * 60 * 60 * 1000),
    duration: 60,
    price: 25,
    status: "available",
    notes: "Progettazione concettuale e schema ER."
  },
  {
    id: "lesson-12",
    teacher: "luca.bianchi@studio.unibo.it",
    student: null,
    time: "17:00",
    subject: "Probabilità e Statistica",
    date: new Date(Date.now() + 17 * 24 * 60 * 60 * 1000),
    duration: 60,
    price: 22,
    status: "available",
    notes: "Variabili aleatorie e distribuzioni principali."
  },
  {
    id: "lesson-13",
    teacher: "giulia.rossi@studio.unibo.it",
    student: null,
    time: "18:00",
    subject: "Machine Learning",
    date: new Date(Date.now() + 18 * 24 * 60 * 60 * 1000),
    duration: 120,
    price: 45,
    status: "available",
    notes: "Regressione lineare e overfitting."
  },
  {
    id: "lesson-14",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "daniel.capannini@studio.unibo.it",
    time: "18:00",
    subject: "PPS",
    date: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000),
    duration: 120,
    price: 45,
    status: "booked",
    notes: "Regressione lineare e overfitting."
  },
  {
    id: "lesson-15",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "luca.cantagallo@studio.unibo.it",
    time: "14:00",
    subject: "Machine Learning",
    date: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000),
    duration: 120,
    price: 20,
    status: "booked",
    notes: "Regressione lineare e overfitting."
  },
  {
    id: "lesson-16",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "daniel.capannini@studio.unibo.it",
    time: "12:00",
    subject: "Basi di Dati",
    date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
    duration: 90,
    price: 15,
    status: "booked",
    notes: "Regressione lineare e overfitting."
  },
];


const reviews = [
  {
    id: "review-1",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "daniele.capannini@studio.unibo.it",
    rating: 5,
    comment: "Ottima spiegazione e molto disponibile."
  },
  {
    id: "review-2",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "luca.bianchi@studio.unibo.it",
    rating: 4,
    comment: "Lezione chiara, ma un po' veloce."
  },
  {
    id: "review-3",
    teacher: "luca.bianchi@studio.unibo.it",
    student: "daniele.capannini@studio.unibo.it",
    rating: 5,
    comment: "Spiegazioni estremamente chiare e dettagliate."
  },
  {
    id: "review-4",
    teacher: "luca.cantagallo@studio.unibo.it",
    student: "daniele.capannini@studio.unibo.it",
    rating: 4,
    comment: "Molto preparato, ottimo approccio."
  },
  {
    id: "review-5",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "daniel.capannini@studio.unibo.it",
    rating: 5,
    comment: "Lezione perfetta, ha chiarito tutti i miei dubbi."
  },
  {
    id: "review-6",
    teacher: "luca.bianchi@studio.unibo.it",
    student: "daniel.capannini@studio.unibo.it",
    rating: 4,
    comment: "Buona lezione, qualche parte un po' complessa."
  },
  {
    id: "review-7",
    teacher: "luca.cantagallo@studio.unibo.it",
    student: "daniel.capannini@studio.unibo.it",
    rating: 5,
    comment: "Molto bravo e super disponibile."
  },
  {
    id: "review-8",
    teacher: "giulia.rossi@studio.unibo.it",
    student: "luca.cantagallo@studio.unibo.it",
    rating: 3,
    comment: "Spiegazione ok, ma poteva essere più approfondita."
  },
  {
    id: "review-9",
    teacher: "luca.bianchi@studio.unibo.it",
    student: "luca.cantagallo@studio.unibo.it",
    rating: 5,
    comment: "Ottimo docente, super consigliato."
  },
  {
    id: "review-10",
    teacher: "luca.cantagallo@studio.unibo.it",
    student: "luca.bianchi@studio.unibo.it",
    rating: 4,
    comment: "Ben strutturata la lezione, molto utile."
  }
];

const reports = [
  {
    reporter: "daniele.capannini@studio.unibo.it",
    reported: "giulia.rossi@studio.unibo.it",
    reason: "comportamento-scorretto",
    comment: "Durante una lezione online ha mostrato poca disponibilità nel rispondere alle domande.",
    status: "pending",
    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000), // 2 giorni fa
  },
  {
    reporter: "luca.bianchi@studio.unibo.it",
    reported: "daniele.capannini@studio.unibo.it",
    reason: "linguaggio-offensivo",
    comment: "Ha utilizzato un tono di voce e un linguaggio inappropriato durante la collaborazione.",
    status: "pending",
    createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000), // 1 giorno fa
  },
  {
    reporter: "daniele.capannini@studio.unibo.it",
    reported: "luca.bianchi@studio.unibo.it",
    reason: "contenuti-inappropriati",
    comment: "Ha condiviso materiale non pertinente e non appropriato alla lezione.",
    status: "pending",
    createdAt: new Date(Date.now() - 12 * 60 * 60 * 1000), // 12 ore fa
  },
  {
    reporter: "giulia.rossi@studio.unibo.it",
    reported: "luca.bianchi@studio.unibo.it",
    reason: "spam-pubblicita",
    comment: "Ha inviato messaggi pubblicitari non richiesti durante una sessione di tutoraggio.",
    status: "pending",
    createdAt: new Date(Date.now() - 6 * 60 * 60 * 1000), // 6 ore fa
  },
  {
    reporter: "giulia.rossi@studio.unibo.it",
    reported: "daniele.capannini@studio.unibo.it",
    reason: "altro",
    comment: "Comportamento ambiguo e disturbante durante le attività del gruppo di studio.",
    status: "pending",
    createdAt: new Date(Date.now() - 3 * 60 * 60 * 1000), // 3 ore fa
  }
]



// Esportiamo i dati usando CommonJS
module.exports = { users, lessons, reviews, admins, reports };

==================================================

FILE: backend\src\controllers\adminController.js
--------------------

Admin = require("../models/adminModel");


exports.checkAdminSocket = async (emailAdmin) => {
  const admin = await Admin.findOne({ emailAdmin: emailAdmin });
  if (!admin) {
    throw new Error("Admin not found " + emailAdmin );
  }
  return true;
}

==================================================

FILE: backend\src\controllers\lessonController.js
--------------------
const Lesson = require("../models/lessonModel");
const User = require("../models/userModel");

exports.createLessonSocket = async (data) => {
  const { teacher, subject, time, date, duration, price } = data;

  if (!teacher || !subject || !date || !price) {
    throw new Error("Missing required fields.");
  }

  const newLesson = new Lesson({
    teacher,
    student: null,
    subject,
    time: time || "9:00",
    date,
    duration: duration || 60,
    price,
    status: "available",
  });

  return await newLesson.save();
};

exports.getAllLessonsSocket = async () => {
  try {
    const now = new Date();

    const lessons = await Lesson.find({
      student: null,
      status: "available",
      date: { $gte: now } 
    })
      .select("-student")
      .populate("teacher", "firstName lastName email")
      .sort({ date: 1 }); 

    return lessons;
  } catch (error) {
    console.error("Error fetching lessons:", error);
    throw error;
  }
};

exports.deleteLessonSocket = async (id) => {
  const deleted = await Lesson.findByIdAndDelete(id);

  if (!deleted) throw new Error("Lesson not found");

  return { message: "Lesson deleted successfully" };
};


exports.getLessonsByStudentSocket = async (email) => {
  if (!email) throw new Error("Email dello studente non fornita");

  const now = new Date();

  const lessons = await Lesson.find({
      student: email,
      date: { $gte: now } 
    })
    .sort({ date: 1 }); 

  return lessons;
};

exports.getLessonsByTeacherSocket = async (email) => {
  if (!email) throw new Error("Email dell'insegnante non fornita");

  const now = new Date();

  const lessons = await Lesson.find({
      teacher: email,
      date: { $gte: now }
    })
    .sort({ date: 1 }); 

  return lessons;
};

exports.modifyLessonSocket = async (lesson) => {
  if (!lesson._id) throw new Error("Lesson ID mancante");

  const existingLesson = await Lesson.findById(lesson._id);

  if (!existingLesson) {
    throw new Error("Lezione non trovata");
  }

  Object.assign(existingLesson, lesson);

  return await existingLesson.save();
};

exports.bookLessonSocket = async (lessonId, studentEmail) => {
  if (!lessonId) throw new Error("Lesson ID mancante");
  if (!studentEmail) throw new Error("Email dello studente mancante");

  const lesson = await Lesson.findById(lessonId);

  if (!lesson) {
    throw new Error("Lezione non trovata");
  }

  if (lesson.status !== "available") {
    throw new Error("La lezione è già stata prenotata");
  }

  lesson.student = studentEmail;
  lesson.status = "booked";

  await lesson.save();

  return lesson;
};

exports.getMattersSocket = async () => {
  return [
        "Analisi",
        "Ingegneria del software",
        "OOP",
        "Basi di Dati",
        "Big data",
        "Project Management",
        "PPS",
        "Algebra e Geometria",
        "Algoritmi",
        "Reti di Calcolatori",
        "Programmazione Web",
        "Sistemi Operativi",
        "Machine Learning",
        "Probabilità e Statistica",
      ];
};

==================================================

FILE: backend\src\controllers\reportController.js
--------------------
const Report = require("../models/reportModel");
const User = require("../models/userModel");

exports.createReportSocket = async (data) => {
  const { reporter, reported, reason, comment, createdAt } = data;

  if (!reporter || !reported || !reason || !comment || !createdAt) {
    throw new Error("All required fields must be provided.");
  }

  if (reporter == reported) {
    throw new Error("A user cannot report themselves.");
  }

  const newReport = new Report({
    reporter,
    reported,
    reason,
    comment,
    createdAt,
  });

  return await newReport.save();
};


exports.getReportByIdSocket = async (emailAdmin, id) => {
  const admin = await Admin.findOne({ emailAdmin });
  if (!admin) {
    throw new Error("Admin not found");
  }
  const report = await Report.findById(id);

  if (!report) {
    throw new Error("Report not found");
  }

  return report;
};

exports.deleteReportSocket = async (emailAdmin, id) => {
  const admin = await Admin.findOne({ emailAdmin });
  if (!admin) {
    throw new Error("Admin not found");
  }
  const deleted = await Report.findByIdAndDelete(id);

  if (!deleted) {
    throw new Error("Report not found");
  }

  return { message: "Report successfully deleted" };
};

exports.getAllUserReportsSocket = async (emailAdmin, username) => {
  const admin = await Admin.findOne({ emailAdmin });
  if (!admin) {
    throw new Error("Admin not found");
  }
  const reports = await Report.find({ reported: username })
    .sort({ createdAt: -1 });

  return reports;
};

exports.getOpenReportsSocket = async (emailAdmin) => {
  const admin = await Admin.findOne({ emailAdmin });
  if (!admin) {
    throw new Error("Admin not found");
  } 
  const reports = await Report.find({ status: "pending" })
    .sort({ createdAt: -1 });
  return reports;
};


==================================================

FILE: backend\src\controllers\reviewController.js
--------------------
const Review  = require("../models/reviewModel");
const User = require("../models/userModel") 

exports.createReviewSocket = async (data) => {
  const { student, teacher, rating, comment } = data;

  const userStudent = await User.findOne({ email: student });
  if (!userStudent) throw new Error("Student not found");

  const userTeacher = await User.findOne({ email: teacher });
  if (!userTeacher) throw new Error("Teacher not found");

  if (userStudent._id.equals(userTeacher._id)) {
    throw new Error("Student and teacher cannot be the same user");
  }

  const existingReview = await Review.findOne({
    student: userStudent._id,
    teacher: userTeacher._id
  });

  if (existingReview) {
    throw new Error("Review already exists for this student and teacher");
  }

  const newReview = new Review({
    student: userStudent.email,
    teacher: userTeacher.email,
    rating: rating,
    comment,
  });

  return await newReview.save();
};

exports.getAllUserReviewSocket = async (email) => {
  const user = await User.findOne({ email: email });

  if (!user) throw new Error("User not found");

  const reviews = await Review.find({ teacher: email });

  if (!reviews || reviews.length === 0) {
    throw new Error("No reviews found for this teacher");
  }

  return reviews;
};


==================================================

FILE: backend\src\controllers\userController.js
--------------------
const bcrypt = require("bcrypt")
const jwt = require("jsonwebtoken")
const User = require("../models/userModel") 
const Admin = require("../models/adminModel")
const Lesson = require("../models/lessonModel")
const Review = require("../models/reviewModel")
const Report = require("../models/reportModel")

const path = require("path");
const fs = require("fs");

const UPLOAD_DIR = path.join(__dirname, "../../uploads");
if (!fs.existsSync(UPLOAD_DIR)) {
  fs.mkdirSync(UPLOAD_DIR);
}


const sanitizeUser = (user) => {
  const obj = user.toObject()
  delete obj.password
  return obj
}

exports.createUser = async (data) => {
  const existingUser = await User.findOne({ email: data.email });
  if (existingUser) {
    throw new Error("Esiste già un account registrato con questa email");
  }

  const hashedPassword = await bcrypt.hash(data.password, 10);

  const user = new User({
    firstName: data.firstName,
    lastName: data.lastName,
    email: data.email,
    password: hashedPassword,
    degreeType: data.degreeType,
    photo: data.photo,
    birthDate: data.birthDate,
    averageGrade: data.averageGrade,
    bio: data.bio
  });

  await user.save();

  return sanitizeUser(user); 
};

exports.loginUser = async (data, jwtSettings) => {
  const { email, password } = data;

  const user = await User.findOne({ email }).select("+password");
  if (!user) {
    throw new Error("User not found");
  }

  const valid = await bcrypt.compare(password, user.password);
  if (!valid) {
    throw new Error("Invalid password");
  }

  const token = jwt.sign(
    { userId: user._id, email: user.email },
    jwtSettings.secret,
    { expiresIn: jwtSettings.expires }
  );

  return sanitizeUser(user);
};



exports.logoutUser = (socket) => {
  socket.data.user = null
}



exports.getSessionData = (socket) => {
  if (!socket.data.user)
    return socket.emit("session:get:response", { error: "No session active" })

  socket.emit("session:get:response", socket.data.user)
}


exports.searchByUsername = async (socket, username) => {
  try {
    const user = await User.findOne({ firstName: username })

    if (!user)
      return socket.emit("user:searchByUsername:response", {
        error: "User not found"
      })

    socket.emit("user:searchByUsername:response", sanitizeUser(user))

  } catch (err) {
    socket.emit("user:searchByUsername:response", { error: err.message })
  }
}



exports.deleteUser = async (socket, data) => {
  try {
    const { email, targetEmail } = data;

    const admin = await Admin.findOne({ emailAdmin: email });

    if (!admin) {
      return { message: "Only admins can delete users" };
    }

    const userToDelete = await User.findOne({ email: targetEmail });

    if (!userToDelete) {
      return { message: "User not found" };
    }

    const lessonsDeleted = await Lesson.deleteMany({
      $or: [
        { student: targetEmail },
        { teacher: targetEmail }
      ]
    });


    const reviewsDeleted = await Review.deleteMany({
      $or: [
        { teacher: targetEmail },  
        { student: targetEmail }    
      ]
    });

    const reportsDeleted = await Report.deleteMany({
      $or: [
        { reporter: targetEmail },   
        { reported: targetEmail }    
      ]
    });


    await User.deleteOne({ email: targetEmail });

    return {
      message: "User, lessons, reviews and ratings successfully deleted"
    };

  } catch (err) {
    throw new Error(err.message);
  }
};


exports.searchById = async (socket, id) => {
  try {
    const user = await User.findById(id)

    if (!user)
      return socket.emit("user:searchById:response", {
        error: "User not found"
      })

    socket.emit("user:searchById:response", sanitizeUser(user))

  } catch (err) {
    socket.emit("user:searchById:response", { error: err.message })
  }
}

exports.getUserByEmail = async (socket, email, callback) => {
  try {
    if (!email) {
      return callback({
        success: false,
        error: "Email is required",
      });
    }

    const user = await User.findOne({ email }).select("-password");

    if (!user) {
      return callback({
        success: false,
        error: "User not found",
      });
    }

    callback({
      success: true,
      data: sanitizeUser(user),
    });

  } catch (err) {
    console.error("Errore ottenimento utente per email:", err, email);
    callback({
      success: false,
      error: err.message,
    });
  }
};

exports.updateUserProfile = async (socket, email, updatedData, callback) => {
  try {
    if (!email) {
      return callback({
        success: false,
        error: "Email is required",
      });
    }

    const user = await User.findOne({ email });

    if (!user) {
      return callback({
        success: false,
        error: "User not found",
      });
    }

    if (updatedData.photo && updatedData.photo.startsWith("data:image/")) {
      const matches = updatedData.photo.match(/^data:image\/(\w+);base64,(.+)$/);
      if (matches) {
        const ext = matches[1]; 
        const base64Data = matches[2];
        const filename = `${Date.now()}.${ext}`;
        const filePath = path.join(UPLOAD_DIR, filename);
      
        fs.writeFileSync(filePath, Buffer.from(base64Data, "base64"));
      
          updatedData.photo = `/uploads/${filename}`;
      }
    }

    Object.keys(updatedData).forEach((key) => {
      if (["password", "_id", "createdAt", "updatedAt"].includes(key)) return;

      user[key] = updatedData[key];
    });

    const savedUser = await user.save();

    const sanitized = sanitizeUser(savedUser);

    return callback({
      success: true,
      data: sanitized,
    });

  } catch (err) {
    console.error("updateUserProfile error:", err);
    return callback({
      success: false,
      error: err.message || "Unknown error",
    });
  }
};


==================================================

FILE: backend\src\models\adminModel.js
--------------------
const mongoose = require("mongoose");

const adminSchema = new mongoose.Schema({
  emailAdmin: {
    type: String,
    required: true,
  }
});

module.exports = mongoose.model("Admin", adminSchema);


==================================================

FILE: backend\src\models\lessonModel.js
--------------------
const mongoose = require("mongoose");
const { v4: uuidv4 } = require("uuid");

const lessonSchema = new mongoose.Schema(
  {
    id: {
      type: String,
      unique: true,
      default: () => uuidv4(),
    },
    teacher: {
      type: String,       
      required: true,
      trim: true,
    },
    student: {
      type: String,      
      default: null,
      trim: true,
    },
    time: {
      type: String,       
      default: "9:00",
      trim: true,
    },  
    subject: {
      type: String,
      required: true,
      enum: [
        "Analisi",
        "Ingegneria del software",
        "OOP",
        "Basi di Dati",
        "Big data",
        "Project Management",
        "PPS",
        "Algebra e Geometria",
        "Algoritmi",
        "Reti di Calcolatori",
        "Programmazione Web",
        "Sistemi Operativi",
        "Machine Learning",
        "Probabilità e Statistica",
      ],
      trim: true,
    },
    date: {
      type: Date,
      required: true,
    },
    duration: {
      type: Number,
      default: 60, 
    },
    price: {
      type: Number,
      required: true,
      min: 0,
    },
    status: {
      type: String,
      enum: ["available", "booked", "completed"],
      default: "available",
    },
    notes: {
      type: String,
      maxlength: 300,
      trim: true,
      default: "",
    },
  },
  {
    timestamps: true,
  }
);

lessonSchema.pre("save", function (next) {
  if (this.status === "booked" && !this.student) {
    return next(new Error("A booked lesson must have a student assigned."));
  }
  next();
});

module.exports = mongoose.model("Lesson", lessonSchema);


==================================================

FILE: backend\src\models\reportModel.js
--------------------
const mongoose = require("mongoose");

const reportSchema = new mongoose.Schema(
  {
    reporter: {
      type: String,    
      required: true,
      trim: true,
    },
    reported: {
      type: String,      
      required: true,
      trim: true,
    },

    reason: {
      type: String,
      required: true,
      enum: [
        "contenuti-inappropriati",
        "linguaggio-offensivo",
        "comportamento-scorretto",
        "spam-pubblicita",
        "altro",
      ],
    },

    comment: {
      type: String,
      required: true,
      maxlength: 1000,
      trim: true,
    },

    status: {
      type: String,
      enum: ["pending", "resolved"],
      default: "pending",
    },

    createdAt: {
      type: Date,
      required: true,
    },
  },
  {
    timestamps: true, 
  }
);

reportSchema.pre("save", function (next) {
  if (this.reporter !== this.reportedUser) {
    next();
  } else {
    next(new Error("A user cannot report themselves."));
  }
});

module.exports = mongoose.model("Report", reportSchema);


==================================================

FILE: backend\src\models\reviewModel.js
--------------------
const mongoose = require("mongoose");
const { v4: uuidv4 } = require("uuid");

const reviewSchema = new mongoose.Schema(
  {
    id: {
          type: String,
          unique: true,
          default: () => uuidv4(),
    },
    teacher: {
      type: String,       
      required: true,
      trim: true,
    },
    student: {
      type: String,       
      required: true,
      trim: true,
    },
    rating: {
      type: Number,
      required: true,
      min: [1, "Minimum rating is 1"],
      max: [5, "Maximum rating is 5"],
    },
    comment: {
      type: String,
      trim: true,
      maxlength: 500,
      default: "",
    },
  },
  {
    timestamps: true, 
  }
);

reviewSchema.index({ student: 1, teacher: 1 }, { unique: true });

module.exports = mongoose.model("Review", reviewSchema);


==================================================

FILE: backend\src\models\userModel.js
--------------------
const mongoose = require("mongoose");
const { v4: uuidv4 } = require("uuid");

const userSchema = new mongoose.Schema(
  {
    id: {
      type: String,
      unique: true,
      default: () => uuidv4(),
    },
    firstName: {
      type: String,
      required: true,
      trim: true,
    },
    lastName: {
      type: String,
      required: true,
      trim: true,
    },
    email: {
      type: String,
      required: true,
      unique: true,
      lowercase: true,
      match: [/^[a-z0-9._%+-]+@studio\.unibo\.it$/, "Invalid email (use your institutional address)"],
    },
    password: {
      type: String,
      required: true,
      minlength: 6,
      select: false, 
    },
    degreeType: {
      type: String,
      required: true,
      enum: ["triennale", "magistrale", "dottorato"],
    },
    photo: {
      type: String,
      default: null,
    },
    birthDate: {
      type: Date,
      default: null,
    },
    averageGrade: {
      type: Number,
      min: 18,
      max: 30,
      default: null,
    },
    bio: {
      type: String,
      maxlength: 200,
      trim: true,
      default: "",
    },
  },
  {
    timestamps: true,
  }
);

module.exports = mongoose.model("User", userSchema);


==================================================

FILE: backend\src\routes\adminRouter.js
--------------------

const controller = require("../controllers/adminController");

module.exports = function (socket, io) {

    socket.on("admin:check", async (emailAdmin, callback) => {
        try {
            await controller.checkAdminSocket(emailAdmin);
            callback({ success: true });
        } catch (err) {
            callback({ success: false, error: err.message });
        }
    });
}

==================================================

FILE: backend\src\routes\lessonRouter.js
--------------------
const controller = require("../controllers/lessonController");

module.exports = function (socket, io) {
  socket.on("lesson:create", async (data, callback) => {
    try {
      const lesson = await controller.createLessonSocket(data);

      callback({ success: true, data: lesson });

      io.emit("lessons:updated");
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });


  socket.on("lessons:getAvailable", async (callback) => {
    try {
      const lessons = await controller.getAllLessonsSocket();
      socket.emit("lessons:available", lessons);
    } catch (err) {
      socket.emit("lessons:available", { error: err.message });
    }
  });


  socket.on("lesson:modify", async (lesson, callback) => {
    try {
      const modifiedLesson = await controller.modifyLessonSocket(lesson);
      callback({ success: true, data: modifiedLesson });

      io.emit("lessons:updated");
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });



  socket.on("lesson:delete", async (id, callback) => {
    try {
      const deleted = await controller.deleteLessonSocket(id);

      callback({ success: true, data: deleted });

      io.emit("lessons:updated");
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });


  socket.on("lesson:myBooked", async (email, callback) => {
    try {
      const lessons = await controller.getLessonsByStudentSocket(email);
      callback({ success: true, data: lessons });
    } catch (err) {
      console.error("Errore ottenimento lezioni prenotate:", err, email);
      callback({ success: false, error: err.message });
    }
  });

  socket.on("lesson:myOffered", async (email, callback) => {
    try {
      const lessons = await controller.getLessonsByTeacherSocket(email);
      callback({ success: true, data: lessons });
    } catch (err) {
      console.error("Errore ottenimento lezioni offerte:", err, email);
      callback({ success: false, error: err.message });
    }
  });

  socket.on("lesson:book", async ({ lessonId, studentEmail }, callback) => {
    try {
      const bookedLesson = await controller.bookLessonSocket(lessonId, studentEmail);
      callback({ success: true, data: bookedLesson });

      io.emit("lessons:updated");
    } catch (err) {
      console.error("Errore prenotazione lezione:", err, lessonId, studentEmail);
      callback({ success: false, error: err.message });
    }
  }); 

  socket.on("lessons:getMatter", async (callback) => {
    try {
      const matters = await controller.getMattersSocket();
      callback({ success: true, matters });
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });

};



==================================================

FILE: backend\src\routes\reportRouter.js
--------------------
// reportSocket.js
const controller = require("../controllers/reportController");

module.exports = function (socket, io) {
  
  // -----------------------------
  // CREATE REPORT
  // -----------------------------
  socket.on("report:create", async (data, callback) => {
    try {
      const report = await controller.createReportSocket(data);
      io.emit("report:updated"); // Notify all clients
      callback({ success: true, data: report });
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });

  // -----------------------------
  // DELETE REPORT
  // -----------------------------
  socket.on("report:delete", async (emailAdmin, id, callback) => {
    try {
      const result = await controller.deleteReportSocket(emailAdmin, id);
      io.emit("report:updated"); // Notify all clients
      callback({ success: true, data: result });
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });

  socket.on("report:getOpen", async (emailAdmin, callback) => {
    try {

      const reports = await controller.getOpenReportsSocket(emailAdmin);
      socket.emit("report:open", reports);
    } catch (err) {
      socket.emit("report:open", { error: err.message });
    }
  });
}


==================================================

FILE: backend\src\routes\reviewRouter.js
--------------------
const controller = require("../controllers/reviewController");

module.exports = function (socket, io) {

  
  socket.on("review:create", async (data, callback) => {
    try {
      const review = await controller.createReviewSocket(data);
      io.emit("review:updated");
      callback({ success: true, data: review });
    } catch (err) {
      callback({ success: false, error: err.message });
    }
  });


  socket.on("review:getByUserEmail", async (email, callback) => {
    try {
      const reviews = await controller.getAllUserReviewSocket(email);
      callback({ success: true, data: reviews });
    } catch (err) {
      callback({ success: false, error: email + " la mail " + err.message });
    }
  });

};


==================================================

FILE: backend\src\routes\userRouter.js
--------------------
const controller = require("../controllers/userController")
const path = require("path");
const fs = require("fs");

const UPLOAD_DIR = path.join(__dirname, "../../uploads");
if (!fs.existsSync(UPLOAD_DIR)) {
  fs.mkdirSync(UPLOAD_DIR);
}

module.exports = function (socket, io, jwtSettings) {

  socket.on("user:register", async (data, callback) => {
    try {
      if (data.photo && data.photo.startsWith("data:image/")) {
        const matches = data.photo.match(/^data:image\/(\w+);base64,(.+)$/);
        if (matches) {
          const ext = matches[1]; 
          const base64Data = matches[2];
          const filename = `${Date.now()}.${ext}`;
          const filePath = path.join(UPLOAD_DIR, filename);

          fs.writeFileSync(filePath, Buffer.from(base64Data, "base64"));

          data.photo = `/uploads/${filename}`;
        }
      }

      const user = await controller.createUser(data); 
      callback({ success: true, data: user });
    } catch (err) {
      console.error(err);
      callback({ success: false, error: err.message });
    }
  });


  socket.on("session:get", () => {
    controller.getSessionData(socket)
  })

  socket.on("session:login", async (data, callback) => {
  try {
    const user = await controller.loginUser(data, jwtSettings); // controller ritorna utente o token
    callback({ success: true, data: user });
  } catch (err) {
    callback({ success: false, error: err.message });
  }
});


  socket.on("session:logout", () => {
    controller.logoutUser(socket)
  })

  socket.on("user:delete", async (data, callback) => {
    try {
      const result = await controller.deleteUser(socket, data)
      callback({ success: true, data: result })
    } catch (err) {
      callback({ success: false, error: err.message })
    }
  })

  socket.on("user:getByEmail", (data, callback) => {
    controller.getUserByEmail(socket, data.email, callback)
  })

  socket.on("user:updateProfile", (email, updatedData, callback) => {
    controller.updateUserProfile(socket, email, updatedData, callback)
  })

}


==================================================

FILE: frontend\index.html
--------------------
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>smart-tutoring</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>


==================================================

FILE: frontend\package.json
--------------------
{
  "name": "frontend",
  "version": "1.0.0",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
  "vue": "^3.4.0",
  "bootstrap": "^5.3.2",
  "pinia": "^2.1.7",
  "socket.io-client": "^4.7.2",
  "vue-router": "^4.2.5"
},
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.0.4",
    "vite": "^5.1.0"
  }
}


==================================================

FILE: frontend\vite.config.js
--------------------
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  plugins: [vue()],
  
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),  
    },
  },

  server: {
    host: '0.0.0.0', 
    port: 8080,        
  }
})


==================================================

FILE: frontend\src\App.vue
--------------------
<template>
  <div :class="['app', showFilters ? 'with-sidebar' : 'no-sidebar']" role="application" aria-label="Piattaforma prenotazioni ripetizioni">

    <AppHeader @toggle-theme="toggleTheme"/>
    
    <RouterView 
      @book="openBooking"
      @edit="openEdit"
      @publish-request="publishDialog.visible = true"
      @show-toast="showToast"
    />

    <button
      v-if="isLoggedIn"
      class="fab-main"
      aria-label="Pubblica nuova lezione"
      title="Pubblica nuova lezione"
      @click="publishDialog.visible = true"
    >
      +
    </button>
      

    <BookingDialog
      v-if="bookingDialog.visible"
      :lesson="bookingDialog.lesson"
      @close="bookingDialog.visible = false"
      @confirm="confirmBooking"
    />

    <PublishDialog
      v-if="publishDialog.visible"
      @close="publishDialog.visible = false"
      @publish="handlePublish"
    />

    <EditLessonDialog
      v-if="editDialog.visible && editDialog.lesson"
      :lesson="editDialog.lesson"
      @close="editDialog.visible = false"
      @modify="handleModify"
    />

    <ToastNotification v-if="toast.visible" :message="toast.message" @close="toast.visible = false" />
  </div>
</template>


<script setup>
import { ref, computed } from 'vue'
import { RouterView, useRoute, useRouter } from 'vue-router'
import AppHeader from './components/AppHeader.vue'
import BookingDialog from './components/BookingDialog.vue'
import PublishDialog from './components/PublishDialog.vue'
import ToastNotification from './components/ToastNotification.vue'
import useDarkMode from './composables/useDarkMode.js'
import { isLoggedIn, setMatter } from '@/composables/auth.js'
import { inject, onMounted, onBeforeUnmount } from "vue";
import { getCurrentUser } from './composables/auth.js'
import EditLessonDialog from './components/EditLessonDialog.vue'


const { toggleTheme } = useDarkMode()

const route = useRoute()
const router = useRouter()
const showFilters = computed(() => route.meta.showFilters)


const bookingDialog = ref({ visible: false, lesson: null })
const publishDialog = ref({ visible: false })
const editDialog = ref({ visible: false, lesson: null })


const toast = ref({ visible: false, message: '' })

function openBooking(lesson) {
  if (!isLoggedIn.value) {
    showToast('⚠️ Devi effettuare l’accesso per prenotare una lezione.')
    router.push('/login')
    return
  }

  bookingDialog.value = { visible: true, lesson }
}

function openEdit(lesson) {
  if (!isLoggedIn.value) {
    showToast('⚠️ Devi effettuare l’accesso per modificare una lezione.')
    router.push('/login')
    return
  }

  editDialog.value = { visible: true, lesson: lesson }
}

const socket = inject("socket");

onMounted(() => {
  socket.emit("lessons:getMatter", (response) => {
    if (response?.success) {
      setMatter(response.matters);
    } else {
      console.error("Errore nel recupero delle materie:", response?.error);
    }
  });

  window.addEventListener("beforeunload", () => {
    if(isLoggedIn.value) {
      logout();
      socket.emit("user:logout");
    }
  });
});


onBeforeUnmount(() => {
  window.addEventListener("beforeunload", () => {
    if(isLoggedIn.value) {
      logout();
      socket.emit("user:logout");
    }
  });
});

function confirmBooking() {
  const lesson = bookingDialog.value.lesson;
  bookingDialog.value.visible = false;
  const userEmail = getCurrentUser().value?.email || null;

  if (!lesson) return;

  socket.emit("lesson:book", {
    lessonId: lesson._id,
    studentEmail: userEmail
  }, (response) => {
    if (!response.success) {
      console.error("Errore durante la prenotazione:", response.error);
      showToast("❌ Errore durante la prenotazione: " + response.error);
      return;
    }
    showToast(
      "✅ Lezione prenotata con successo! Il costo è stato addebitato dal tuo saldo Smart Tutoring."
    );
  });
}



function handlePublish(lesson) {
  publishDialog.value.visible = false;

  socket.emit("lesson:create", lesson, (response) => {
    if (!response.success) {
      console.error("Errore durante la pubblicazione:", response.error);
      showToast("❌ Errore durante la pubblicazione: " + response.error);
      return;
    }
    showToast("✅ Lezione pubblicata con successo!");

  });
}

function handleModify(lesson) {
  editDialog.value.visible = false;

  socket.emit("lesson:modify", lesson, (response) => {
    if (!response.success) {
      console.error("Errore durante la modifica:", response.error);
      showToast("❌ Errore durante la modifica: " + response.error);
      return;
    }
    showToast("✅ Lezione modificata con successo!");

  });
}


function showToast(message) {
  toast.value.message = message
  toast.value.visible = true
  setTimeout(() => (toast.value.visible = false), 2000)
}
</script>

<style scoped>
.app {
  min-height: 100vh;
  gap: var(--gap);
  padding-top: 4.5rem;

}

.app.no-sidebar {
  display: grid;
  grid-template-columns: 1fr;
}

@media (min-width: 880px) {
  .app.with-sidebar {
    display: grid;
    grid-template-columns: var(--sidebar-w) 1fr;
  }
}

@media (max-width: 879px) {
  .app.with-sidebar {
    display: flex;
    flex-direction: column;
  }
}

.fab-main {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  width: 3.5rem;
  height: 3.5rem;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  font-size: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-md);
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 1001;
}

.fab-main:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}
</style>


==================================================

FILE: frontend\src\main.js
--------------------
import "bootstrap/dist/css/bootstrap.css"
import "bootstrap"
import { createApp } from 'vue'
import './assets/styles/base.css'
import App from './App.vue'
import { createPinia } from 'pinia'
import router from "./routes/router"
import SocketPlugin from './plugins/socket'

createApp(App)
  .use(router)
  .use(createPinia())
  .use(SocketPlugin)
  .mount('#app')


==================================================

FILE: frontend\src\style.css
--------------------
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

.card {
  padding: 2em;
}

#app {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}


==================================================

FILE: frontend\src\assets\css\access.css
--------------------
@import url('base.css');

.access-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 2rem 1rem;
}

.access-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  padding: 2rem;
  width: 100%;
  max-width: 400px;
  margin-top: calc(1rem);
}


h2 {
  margin-top: 0;
  text-align: center;
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 1rem;
  position: relative;
}

.password-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.password-wrapper input {
  flex: 1;
  padding-right: 2.4rem; 
}

input[readonly] {
  background: color-mix(in srgb, var(--muted) 10%, transparent);
  cursor: not-allowed;
  color: var(--muted);
}

.password-toggle {
  position: absolute;
  right: 0.3rem;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.password-toggle svg {
  overflow: visible; 
}


.password-toggle .icon {
  width: 1.4rem;
  height: 1.4rem;
  pointer-events: none;
  transition: opacity 0.25s ease, transform 0.25s ease;
}

.password-toggle .hidden {
  opacity: 0;
  transform: scale(0.7);
  position: absolute;
}

.profile-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.profile-pic-wrapper {
  position: relative;
  width: 80px;
  height: 80px;
  flex-shrink: 0;
}

.profile-pic {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid var(--border-color, #ccc);
  background-color: #f0f0f0;
}

.edit-icon {
  position: absolute;
  bottom: 0;
  right: 0;
  background: var(--primary-color, #007bff);
  color: white;
  border-radius: 50%;
  padding: 4px 6px;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.3s;
}

.edit-icon:hover {
  background: var(--primary-hover, #0056b3);
}




==================================================

FILE: frontend\src\assets\css\base.css
--------------------
:root {
  --font-main: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --bg: #f9fafb;
  --card: #ffffff;
  --muted: #6b7280;
  --text: #111827;
  --accent: #3b82f6;
  --accent-hover: #2563eb;
  --radius: 12px;
  --gap: 1rem;
  --sidebar-w: 300px;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0f172a;
    --card: #1e293b;
    --muted: #94a3b8;
    --text: #f1f5f9;
    --accent: #60a5fa;
    --accent-hover: #3b82f6;
    --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
  }
}

* {
  box-sizing: border-box;
}

html, body {
  height: 100%;
  margin: 0;
  font-family: var(--font-main);
  color: var(--text);
  background: var(--bg);
  line-height: 1.5;
}

a {
  color: inherit;
  text-decoration: none;
}

button, input, select {
  font-family: inherit;
}



label {
  font-weight: 500;
  margin-bottom: .25rem;
}

input, select, textarea {
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  border-radius: var(--radius);
  padding: .5rem .75rem;
  background: var(--bg);
  color: var(--text);
  font-size: 1rem;
}

input:focus, select:focus, textarea:focus {
  outline: 2px solid var(--accent);
  border-color: transparent;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .45rem .9rem;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: all .2s ease;
}

.btn:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

.btn-primary {
  background: var(--accent);
  color: white;
}
.btn-primary:hover {
  background: var(--accent-hover);
}

.btn-primary-large {
  background: var(--accent);
  color: white;
  border: none;
  padding: .6rem 1rem;
  border-radius: var(--radius);
  font-size: 1rem;
  cursor: pointer;
  width: 100%;
  margin-top: .5rem;
  transition: background .2s ease;
}

.btn-primary-large:hover {
  background: color-mix(in srgb, var(--accent) 80%, black);
}

.btn-ghost {
  background: transparent;
  border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  color: var(--text);
}
.btn-ghost:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
}

.secondary-text {
  text-align: center;
  margin-top: 1rem;
  color: var(--muted);
}

.secondary-text a {
  color: var(--accent);
  text-decoration: none;
}

.secondary-text a:hover {
  text-decoration: underline;
}

/* === Toast Notification === */
.toast {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  background: var(--card);
  color: var(--text);
  border-left: 4px solid var(--accent);
  box-shadow: var(--shadow-md);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  display: flex;
  align-items: center;
  gap: .75rem;
  min-width: 260px;
  z-index: 2000;
  animation: slideUp .4s ease-out;
}

.toast.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px);
  transition: opacity .3s ease, transform .3s ease;
}

.toast.show {
  opacity: 1;
  transform: translateY(0);
}

#toastClose {
  background: none;
  border: none;
  font-size: 1rem;
  color: var(--muted);
  cursor: pointer;
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.error-text {
  color: #e63946;
  font-size: 0.85rem;
  margin-top: 4px;
  display: block;
}

.error-tooltip {
  position: absolute;
  background: #e63946;
  color: #fff;
  font-size: 0.85rem;
  padding: 0.4rem 0.6rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  white-space: nowrap;
  bottom: 100%;
  left: 0;
  transform: translateY(-6px);
  animation: fadeIn .2s ease-out;
  z-index: 50;
}

.error-tooltip::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 12px;
  border-width: 6px;
  border-style: solid;
  border-color: #e63946 transparent transparent transparent;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(-6px); }
}



@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-6px); }
  40%, 80% { transform: translateX(6px); }
}

.shake {
  animation: shake 0.35s ease-in-out;
}

.form-group { position: relative; }

input.error {
  border-color: #e63946 !important;
  outline: none;
}

html, body, .lesson-card, .sidebar, .content-header, header.app-header {
  transition: background-color .3s ease, color .3s ease, box-shadow .3s ease;
}

html[data-theme='dark'] {
  --bg: #0f172a;
  --card: #1e293b;
  --muted: #94a3b8;
  --text: #f1f5f9;
  --accent: #60a5fa;
  --accent-hover: #3b82f6;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
}

html[data-theme='light'] {
  --bg: #f9fafb;
  --card: #ffffff;
  --muted: #6b7280;
  --text: #111827;
  --accent: #3b82f6;
  --accent-hover: #2563eb;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.booking-dialog.hidden { display: none; }
.booking-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.booking-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.booking-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.booking-dialog.open .booking-panel { transform: translateY(0); }

.dialog-close {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: transparent;
  border: none;
  font-size: 1.4rem;
  line-height: 1;
  color: var(--muted);
  cursor: pointer;
  padding: .25rem;
  border-radius: 8px;
}
.dialog-close:focus { outline: 2px solid var(--accent); }

.dialog-header { margin-bottom: .5rem; }
.dialog-sub { margin: .25rem 0 0; color: var(--muted); font-size: .95rem; }

.dialog-body p { margin: .45rem 0; font-size: .95rem; }
.dialog-body .muted { color: var(--muted); font-size: .9rem; margin-top: .5rem; }

.dialog-footer {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .8rem;
}

.dialog-footer .btn:focus { outline: 3px solid color-mix(in srgb, var(--accent) 25%, transparent); outline-offset: 2px; }

@media (max-width: 520px) {
  .booking-panel { padding: .85rem; width: calc(100% - 1.6rem); }
  .dialog-footer { flex-direction: column-reverse; align-items: stretch; }
  .dialog-footer .btn { width: 100%; }
}

.publish-dialog.hidden { display: none; }
.publish-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.publish-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.publish-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.publish-dialog.open .publish-panel {
  transform: translateY(0);
}

.publish-panel label {
  display: block;
  margin-top: .6rem;
  font-weight: 500;
}

.publish-panel input,
.publish-panel textarea {
  width: 100%;
  margin-top: .25rem;
  padding: .5rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--bg);
  color: var(--text);
  font-family: inherit;
  resize: vertical;
}

.publish-panel input:focus,
.publish-panel textarea:focus {
  outline: 2px solid var(--accent);
  border-color: var(--accent);
}

.publish-panel .dialog-actions {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .9rem;
}

.publish-panel .dialog-close {
  position: absolute;
  top: .5rem;
  right: .5rem;
  font-size: 1.4rem;
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  border-radius: 8px;
}

.publish-panel .dialog-close:hover {
  color: var(--text);
}

@media (max-width: 520px) {
  .publish-panel { width: calc(100% - 1.4rem); padding: .9rem; }
  .publish-panel .dialog-actions { flex-direction: column-reverse; }
  .publish-panel .dialog-actions .btn { width: 100%; }
}

/* === FAB (Floating Action Button) === */
.fab-inline {
  position: fixed;
  bottom: 1.2rem;
  right: 1.5rem;
  display: flex;
  gap: .75rem;
  align-items: center;
  z-index: 1050;
}

.fab-inline button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  font-size: 1.5rem;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-md);
  transition: transform .2s ease, background .2s ease;
}

.fab-inline button:hover {
  transform: scale(1.05);
}

.fab-main {
  background: var(--accent);
}

.fab-secondary {
  background: color-mix(in srgb, var(--accent) 70%, black);
}

.fab-secondary svg {
  width: 22px;
  height: 22px;
  stroke: white;
}







==================================================

FILE: frontend\src\assets\css\components.css
--------------------
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .45rem .9rem;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: all .2s ease;
}

.btn:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

.btn-primary {
  background: var(--accent);
  color: white;
}
.btn-primary:hover {
  background: var(--accent-hover);
}

.btn-primary-large {
  background: var(--accent);
  color: white;
  border: none;
  padding: .6rem 1rem;
  border-radius: var(--radius);
  font-size: 1rem;
  cursor: pointer;
  width: 100%;
  margin-top: .5rem;
  transition: background .2s ease;
}

.btn-primary-large:hover {
  background: color-mix(in srgb, var(--accent) 80%, black);
}

.btn-ghost {
  background: transparent;
  border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  color: var(--text);
}
.btn-ghost:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
}

.secondary-text {
  text-align: center;
  margin-top: 1rem;
  color: var(--muted);
}

.secondary-text a {
  color: var(--accent);
  text-decoration: none;
}

.secondary-text a:hover {
  text-decoration: underline;
}

.toast {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  background: var(--card);
  color: var(--text);
  border-left: 4px solid var(--accent);
  box-shadow: var(--shadow-md);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  display: flex;
  align-items: center;
  gap: .75rem;
  min-width: 260px;
  z-index: 2000;
  animation: slideUp .4s ease-out;
}

.toast.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px);
  transition: opacity .3s ease, transform .3s ease;
}

.toast.show {
  opacity: 1;
  transform: translateY(0);
}

#toastClose {
  background: none;
  border: none;
  font-size: 1rem;
  color: var(--muted);
  cursor: pointer;
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.error-text {
  color: #e63946;
  font-size: 0.85rem;
  margin-top: 4px;
  display: block;
}

.error-tooltip {
  position: absolute;
  background: #e63946;
  color: #fff;
  font-size: 0.85rem;
  padding: 0.4rem 0.6rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  white-space: nowrap;
  bottom: 100%;
  left: 0;
  transform: translateY(-6px);
  animation: fadeIn .2s ease-out;
  z-index: 50;
}

.error-tooltip::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 12px;
  border-width: 6px;
  border-style: solid;
  border-color: #e63946 transparent transparent transparent;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(-6px); }
}



@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-6px); }
  40%, 80% { transform: translateX(6px); }
}

.shake {
  animation: shake 0.35s ease-in-out;
}

.form-group { position: relative; }

input.error {
  border-color: #e63946 !important;
  outline: none;
}




==================================================

FILE: frontend\src\assets\css\darkmode.css
--------------------
html, body, .lesson-card, .sidebar, .content-header, header.app-header {
  transition: background-color .3s ease, color .3s ease, box-shadow .3s ease;
}

html[data-theme='dark'] {
  --bg: #0f172a;
  --card: #1e293b;
  --muted: #94a3b8;
  --text: #f1f5f9;
  --accent: #60a5fa;
  --accent-hover: #3b82f6;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
}

html[data-theme='light'] {
  --bg: #f9fafb;
  --card: #ffffff;
  --muted: #6b7280;
  --text: #111827;
  --accent: #3b82f6;
  --accent-hover: #2563eb;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
}



==================================================

FILE: frontend\src\assets\css\footer.css
--------------------
.footer-note {
  text-align: center;
  color: var(--muted);
  font-size: .85rem;
  padding: 2rem 1rem;
}

==================================================

FILE: frontend\src\assets\css\header.css
--------------------
header.app-header {
  position: fixed;
  inset: 0 auto auto 0;
  width: 100%;
  z-index: 1000;
  background: var(--card);
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .5rem 1rem;
}

.brand {
  display: flex;
  align-items: center;
  gap: .75rem;
}

.brand .logo {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--accent), #8b5cf6);
  display: grid;
  place-items: center;
  color: white;
  font-weight: 700;
  font-size: 1rem;
}

.brand h1 {
  font-size: 1.1rem;
  margin: 0;
}

.lesson-sub {
  color: var(--muted);
  font-size: .8rem;
}

.theme-toggle {
  width: 2.4rem;
  height: 2.4rem;
  display: inline-flex;
  place-items: center;
  position: relative;
  transition: background .2s ease;
}

.theme-toggle .icon {
  width: 1.4rem;
  height: 1.4rem;
  pointer-events: none;
  transition: opacity .25s ease, transform .25s ease;
}

.theme-toggle .hidden {
  opacity: 0;
  transform: scale(0.7);
  position: absolute;
}

.theme-toggle:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
  border-radius: 50%;
}


==================================================

FILE: frontend\src\assets\css\lezionidiuser.css
--------------------
.tutor-header {
  position: sticky;
  top: 5rem; 
  z-index: 900;
  background: var(--card);
  padding: 1rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  justify-content: space-between;
  flex-wrap: wrap;
}

.tutor-info {
  display: flex;
  flex-direction: column;
  flex: 1;
  gap: 0.3rem;
}

.tutor-header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.lesson-author {
  font-weight: 500;
  color: var(--muted);
  font-size: 0.85rem;
}

.name-and-icon {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.tutor-header-top h2 {
  margin: 0;
  font-size: 1.3rem;
  line-height: 1.2;
}

.filters-row { 
  margin-left: auto;
}

.profile-pic {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid color-mix(in srgb, var(--text) 10%, transparent);
}

.tutor-info h2 {
  margin: 0;
  font-size: 1.4rem;
}

.course-type {
  font-size: 0.9rem;
  color: color-mix(in srgb, var(--text) 70%, transparent);
  margin-bottom: 0;
}

.rating {
  font-size: 0.9rem;
  color: var(--accent);
}

.rating-value {
  margin-left: .3rem;
  color: var(--text);
}

.reviews {
  color: color-mix(in srgb, var(--text) 70%, transparent);
}

.section-title {
  font-size: 1.2rem;
  margin-bottom: 1rem;
}

@media (max-width: 700px) {
  .tutor-header {
    flex-direction: column;
    align-items: flex-start;
    text-align: left;
  }
  .profile-pic {
    width: 70px;
    height: 70px;
  }
  .tutor-header-top {
    flex-direction: column;
    align-items: flex-start;
  }

  .filters-row {
    margin-left: 0;
    margin-top: 0.5rem;
  }
}

.page-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin: 0;
}


html[data-theme='light'] button:disabled {
  background-color: #d1fae5; 
  color: #15803d;            
  border: 1px solid #15803d;
  opacity: 0.6;
  cursor: not-allowed;
}

html[data-theme='dark'] button:disabled {
  background-color: #1e3a2f; 
  color: #4ade80;           
  border: 1px solid #4ade80;
  opacity: 0.6;
  cursor: not-allowed;
}


==================================================

FILE: frontend\src\assets\css\modal.css
--------------------
.booking-dialog.hidden { display: none; }
.booking-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.booking-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.booking-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.booking-dialog.open .booking-panel { transform: translateY(0); }

.dialog-close {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: transparent;
  border: none;
  font-size: 1.4rem;
  line-height: 1;
  color: var(--muted);
  cursor: pointer;
  padding: .25rem;
  border-radius: 8px;
}
.dialog-close:focus { outline: 2px solid var(--accent); }

.dialog-header { margin-bottom: .5rem; }
.dialog-sub { margin: .25rem 0 0; color: var(--muted); font-size: .95rem; }

.dialog-body p { margin: .45rem 0; font-size: .95rem; }
.dialog-body .muted { color: var(--muted); font-size: .9rem; margin-top: .5rem; }

.dialog-footer {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .8rem;
}

.dialog-footer .btn:focus { outline: 3px solid color-mix(in srgb, var(--accent) 25%, transparent); outline-offset: 2px; }

@media (max-width: 520px) {
  .booking-panel { padding: .85rem; width: calc(100% - 1.6rem); }
  .dialog-footer { flex-direction: column-reverse; align-items: stretch; }
  .dialog-footer .btn { width: 100%; }
}

.publish-dialog.hidden { display: none; }
.publish-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.publish-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.publish-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.publish-dialog.open .publish-panel {
  transform: translateY(0);
}

.publish-panel label {
  display: block;
  margin-top: .6rem;
  font-weight: 500;
}

.publish-panel input,
.publish-panel textarea {
  width: 100%;
  margin-top: .25rem;
  padding: .5rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--bg);
  color: var(--text);
  font-family: inherit;
  resize: vertical;
}

.publish-panel input:focus,
.publish-panel textarea:focus {
  outline: 2px solid var(--accent);
  border-color: var(--accent);
}

.publish-panel .dialog-actions {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .9rem;
}

.publish-panel .dialog-close {
  position: absolute;
  top: .5rem;
  right: .5rem;
  font-size: 1.4rem;
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  border-radius: 8px;
}

.publish-panel .dialog-close:hover {
  color: var(--text);
}

@media (max-width: 520px) {
  .publish-panel { width: calc(100% - 1.4rem); padding: .9rem; }
  .publish-panel .dialog-actions { flex-direction: column-reverse; }
  .publish-panel .dialog-actions .btn { width: 100%; }
}

.fab-inline {
  position: fixed;
  bottom: 1.2rem;
  right: 1.5rem;
  display: flex;
  gap: .75rem;
  align-items: center;
  z-index: 1050;
}

.fab-inline button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  font-size: 1.5rem;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-md);
  transition: transform .2s ease, background .2s ease;
}

.fab-inline button:hover {
  transform: scale(1.05);
}

.fab-main {
  background: var(--accent);
}

.fab-secondary {
  background: color-mix(in srgb, var(--accent) 70%, black);
}

.fab-secondary svg {
  width: 22px;
  height: 22px;
  stroke: white;
}


==================================================

FILE: frontend\src\assets\css\profilo.css
--------------------
@import url('base.css');

.profile-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 2rem 1rem;
}

.profile-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  padding: 2rem 1.5rem;
  width: 100%;
  max-width: 600px;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.profile-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.profile-photo {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: var(--shadow-sm);
}

.profile-sub {
  color: var(--muted);
  margin: 0.25rem 0 0;
}

.profile-rating {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  color: var(--muted);
}

.stars {
  color: #fbbf24; 
  font-size: 1rem;
  letter-spacing: 1px;
}

.rating-value {
  font-weight: 500;
  color: var(--text);
}

.profile-info {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.info-item strong {
  display: inline-block;
  width: 50%;
  color: var(--text);
}

.info-item span,
.info-item p {
  color: var(--muted);
  margin: 0;
}

.profile-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.footer-note {
  text-align: center;
  font-size: 0.85rem;
  color: var(--muted);
  margin-top: 2rem;
}

@media (max-width: 600px) {
  .profile-card {
    padding: 1.5rem 1rem;
  }
  .info-item strong {
    width: auto;
    display: block;
    margin-bottom: 0.25rem;
  }
  .profile-header {
    flex-direction: column;
    align-items: flex-start;
  }
  .profile-actions {
    justify-content: center;
  }
}

@media (min-width: 900px) {
  .profile-card {
    padding: 2.5rem 2rem;
  }
  .profile-photo {
    width: 110px;
    height: 110px;
  }
}


==================================================

FILE: frontend\src\assets\css\segnala.css
--------------------
@import url('base.css');

.report-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 2rem 1rem;
  background: var(--bg);
  min-height: calc(100vh - 80px);
}

.report-card {
  background: var(--card);
  color: var(--text);
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  padding: 2rem 1.5rem;
  width: 100%;
  max-width: 600px;
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
}

.report-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.25rem;
}

.report-sub {
  color: var(--muted);
  font-size: 0.95rem;
  margin-bottom: 0.75rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.55rem; 
  margin-bottom: 1rem; 
}

label {
  font-weight: 600;
  color: var(--text);
}

input,
select,
textarea {
  font-family: inherit;
  font-size: 1rem;
  padding: 0.6rem 0.75rem;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  border-radius: var(--radius);
  background: var(--card);
  color: var(--text);
  transition: border-color 0.2s ease, background-color 0.2s ease;
}

input[readonly] {
  background: color-mix(in srgb, var(--muted) 10%, transparent);
  cursor: not-allowed;
  color: var(--muted);
}

input:focus,
select:focus,
textarea:focus {
  border-color: var(--accent);
  outline: none;
  background: color-mix(in srgb, var(--accent) 6%, var(--card));
}

html[data-theme='dark'] select {
  background: var(--card);
  color: var(--text);
}

select option {
  background: var(--card);
  color: var(--text);
}

textarea {
  resize: vertical;
  min-height: 120px;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

@media (max-width: 600px) {
  .report-card {
    padding: 1.5rem 1rem;
  }
  .form-actions {
    flex-direction: column-reverse;
  }
  .form-actions .btn {
    width: 100%;
  }
}


==================================================

FILE: frontend\src\assets\css\sidebar.css
--------------------
.sidebar {
  background: var(--card);
  border-radius: var(--radius);
  padding: 1rem;
  box-shadow: var(--shadow-sm);
  width: 100%;
  max-width: var(--sidebar-w);
  margin: 0 auto;
}

.sidebar h2 {
  font-size: 1rem;
  margin-top: 0;
  color: var(--text);
}

.controls {
  display: flex;
  flex-direction: column;
  gap: .75rem;
}

.control-group {
  display: flex;
  flex-direction: column;
  gap: .25rem;
}

input, select {
  padding: .6rem .7rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 15%, transparent);
  background: var(--bg);
  color: var(--text);
  transition: border-color .2s;
}

input:focus, select:focus {
  border-color: var(--accent);
  outline: none;
}

.minmax {
  width: 50%;
}

@media (min-width: 880px) {
    .sidebar {
    position: sticky;
    top: 5.5rem;
    align-self: start;
    margin: 0;
  }
}


@media (min-width: 880px) {
  .filters-toggle {
    display: none !important;
  }

  .sidebar {
    max-height: none;
    opacity: 1;
    overflow: visible;
    pointer-events: auto;
    transform: none;
  }
}

@media (max-width: 879px) {
  .filters-toggle {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    font-size: .9rem;
    padding: .4rem .7rem;
    border-radius: var(--radius);
    border: 1px solid color-mix(in srgb, var(--text) 15%, transparent);
    background: var(--card);
    color: var(--text);
    box-shadow: var(--shadow-sm);
    transition: background .2s ease;
  }

  .filters-toggle:hover {
    background: color-mix(in srgb, var(--accent) 10%, transparent);
  }

  .sidebar {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    pointer-events: none;
    transform: scaleY(0.97);
    transform-origin: top;
    transition: all .3s ease;
    margin-top: 0;
  }

  .sidebar.open {
    max-height: 100vh;
    opacity: 1;
    pointer-events: auto;
    transform: scaleY(1);
    margin-top: 3.5rem;
  }

  .app {
    display: flex;
    flex-direction: column;
    padding-top: 4.5rem;
  }

  .content-header {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: .5rem;
  }

  .filters-row {
    display: flex;
    align-items: center;
    gap: .5rem;
    flex-wrap: wrap;
  }
}



==================================================

FILE: frontend\src\assets\css\style.css
--------------------
@import url('base.css');

main.content {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  width: 100%;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card);
  padding: .75rem 1rem;
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 4rem;
  z-index: 900;
  flex-wrap: wrap;
}

.filters-row {
  display: flex;
  gap: .5rem;
  align-items: center;
  flex-wrap: wrap;
}

.results {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding: 0 1rem 1rem;
}

.lesson-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  padding: 0.85rem 1rem;
  transition: transform .2s ease, box-shadow .2s ease;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.6rem; 
  min-height: 110px; 
}

.lesson-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.lesson-card.removing {
  opacity: 0;
  transform: translateY(-6px) scale(.995);
  transition: opacity .18s ease, transform .18s ease;
}


.lesson-content {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.6rem;
  height: 100%;
}
.lesson-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 0.25rem; 
}
.lesson-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-top: 0.2rem;
}
.lesson-line {
  display: grid;
  grid-template-columns: 2fr 1fr auto;
  align-items: center;
  gap: .75rem;
}
.lesson-title {
  font-weight: 600;
  font-size: 0.95rem;
  margin: 0;
}
.lesson-info {
  display: flex;
  gap: 0.5rem;
  color: var(--muted);
  font-size: 0.85rem;
  justify-content: flex-end;
  flex-wrap: wrap;
}
.lesson-author {
  font-weight: 500;
  color: var(--muted);
  font-size: 0.85rem;
}
.card-actions {
  display: flex;
  gap: .4rem;
}
.small {
  font-size: .85rem;
  padding: .3rem .6rem;
}

.card-actions svg {
  width: 18px;
  height: 18px;
}

.btn-ghost svg {
  transition: transform 0.2s ease, color 0.2s ease;
}

.btn-ghost:hover svg {
  transform: scale(1.1);
  color: var(--accent);
}


@media (max-width: 600px) {
  .lesson-header, .lesson-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.4rem;
  }
  .lesson-info {
    justify-content: flex-start;
  }
  .card-actions {
    width: 100%;
    justify-content: flex-end;
  }
}



@media (min-width: 880px) {
  .app {
    display: grid;
    grid-template-columns: var(--sidebar-w) 1fr;
    align-items: start;
    padding-top: 4.5rem;
  }
  .results {
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  }
  .lesson-line {
    grid-template-columns: 1fr auto;
    gap: .5rem;
  }

}





==================================================

FILE: frontend\src\assets\styles\access-page.css
--------------------
.access-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 2rem 1rem;
}

.access-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  padding: 2rem;
  width: 100%;
  max-width: 400px;
  margin-top: calc(1rem);
}

h2 {
  margin-top: 0;
  text-align: center;
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 1rem;
  position: relative;
}

.password-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.password-wrapper input {
  flex: 1;
  padding-right: 2.4rem;
}

input[readonly] {
  background: color-mix(in srgb, var(--muted) 10%, transparent);
  cursor: not-allowed;
  color: var(--muted);
}

input.error {
  border-color: #e63946;
}

.password-toggle {
  position: absolute;
  right: 0.3rem;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.password-toggle svg {
  overflow: visible; 
}

.password-toggle .icon {
  width: 1.4rem;
  height: 1.4rem;
  pointer-events: none;
  transition: opacity 0.25s ease, transform 0.25s ease;
}

.password-toggle .hidden {
  opacity: 0;
  transform: scale(0.7);
  position: absolute;
}

.profile-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.profile-pic-wrapper {
  position: relative;
  width: 80px;
  height: 80px;
  flex-shrink: 0;
}

.profile-pic {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid var(--border-color, #ccc);
  background-color: #f0f0f0;
}

.edit-icon {
  position: absolute;
  bottom: 0;
  right: 0;
  background: var(--primary-color, #007bff);
  color: white;
  border-radius: 50%;
  padding: 4px 6px;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.3s;
}

.edit-icon:hover {
  background: var(--primary-hover, #0056b3);
}


==================================================

FILE: frontend\src\assets\styles\base.css
--------------------
:root {
  --font-main: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --bg: #f0f2f5;
  --card: #ffffff;
  --muted: #64748b;
  --text: #1e293b;
  --accent: #3b71ca;
  --accent-hover: #2d5aa3;
  --radius: 12px;
  --gap: 1rem;
  --sidebar-w: 300px;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.06);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0f172a;
    --card: #1e293b;
    --muted: #94a3b8;
    --text: #f1f5f9;
    --accent: #60a5fa;
    --accent-hover: #3b82f6;
    --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
  }
}

* {
  box-sizing: border-box;
}

html, body {
  height: 100%;
  margin: 0;
  font-family: var(--font-main);
  color: var(--text);
  background: var(--bg);
  line-height: 1.5;
}

a {
  color: inherit;
  text-decoration: none;
}

button, input, select {
  font-family: inherit;
}



label {
  font-weight: 500;
  margin-bottom: .25rem;
}

input, select, textarea {
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  border-radius: var(--radius);
  padding: .5rem .75rem;
  background: var(--bg);
  color: var(--text);
  font-size: 1rem;
}

input:focus, select:focus, textarea:focus {
  outline: 2px solid var(--accent);
  border-color: transparent;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .45rem .9rem;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: all .2s ease;
}

.btn:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
}

.btn-primary {
  background: var(--accent);
  color: white;
}
.btn-primary:hover {
  background: var(--accent-hover);
}

.btn-primary-large {
  background: var(--accent);
  color: white;
  border: none;
  padding: .6rem 1rem;
  border-radius: var(--radius);
  font-size: 1rem;
  cursor: pointer;
  width: 100%;
  margin-top: .5rem;
  transition: background .2s ease;
}

.btn-primary-large:hover {
  background: color-mix(in srgb, var(--accent) 80%, black);
}

.btn-ghost {
  background: transparent;
  border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  color: var(--text);
}
.btn-ghost:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
}

.secondary-text {
  text-align: center;
  margin-top: 1rem;
  color: var(--muted);
}

.secondary-text a {
  color: var(--accent);
  text-decoration: none;
}

.secondary-text a:hover {
  text-decoration: underline;
}

.toast {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  background: var(--card);
  color: var(--text);
  border-left: 4px solid var(--accent);
  box-shadow: var(--shadow-md);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  display: flex;
  align-items: center;
  gap: .75rem;
  min-width: 260px;
  z-index: 2000;
  animation: slideUp .4s ease-out;
}

.toast.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px);
  transition: opacity .3s ease, transform .3s ease;
}

.toast.show {
  opacity: 1;
  transform: translateY(0);
}

#toastClose {
  background: none;
  border: none;
  font-size: 1rem;
  color: var(--muted);
  cursor: pointer;
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.error-text {
  color: #e63946;
  font-size: 0.85rem;
  margin-top: 4px;
  display: block;
}

.error-tooltip {
  position: absolute;
  background: #e63946;
  color: #fff;
  font-size: 0.85rem;
  padding: 0.4rem 0.6rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
  white-space: nowrap;
  bottom: 100%;
  left: 0;
  transform: translateY(-6px);
  animation: fadeIn .2s ease-out;
  z-index: 50;
}

.error-tooltip::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 12px;
  border-width: 6px;
  border-style: solid;
  border-color: #e63946 transparent transparent transparent;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(-6px); }
}



@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-6px); }
  40%, 80% { transform: translateX(6px); }
}

.shake {
  animation: shake 0.35s ease-in-out;
}

.form-group { position: relative; }

input.error {
  border-color: #e63946 !important;
  outline: none;
}

html, body, .lesson-card, .sidebar, .content-header, header.app-header {
  transition: background-color .3s ease, color .3s ease, box-shadow .3s ease;
}

html[data-theme='dark'] {
  --bg: #0f172a;
  --card: #1e293b;
  --muted: #94a3b8;
  --text: #f1f5f9;
  --accent: #60a5fa;
  --accent-hover: #3b82f6;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
}

html[data-theme='light'] {
  --bg: #f9fafb;
  --card: #ffffff;
  --muted: #6b7280;
  --text: #111827;
  --accent: #3b82f6;
  --accent-hover: #2563eb;
  --shadow-sm: 0 2px 6px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
}



.fab-inline {
  position: fixed;
  bottom: 1.2rem;
  right: 1.5rem;
  display: flex;
  gap: .75rem;
  align-items: center;
  z-index: 1050;
}

.fab-inline button {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  font-size: 1.5rem;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-md);
  transition: transform .2s ease, background .2s ease;
}

.fab-inline button:hover {
  transform: scale(1.05);
}

.fab-main {
  background: var(--accent);
}

.fab-secondary {
  background: color-mix(in srgb, var(--accent) 70%, black);
}

.fab-secondary svg {
  width: 22px;
  height: 22px;
  stroke: white;
}







==================================================

FILE: frontend\src\components\AppHeader.vue
--------------------
<template>
  <header class="app-header" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <img src="@/assets/LogoSmartTutoring.png" alt="Logo ripetizioni" width="44" height="44" />
      </div>
      <div>
        <h1>Smart Tutoring</h1>
        <p class="lesson-sub">Trova e prenota lezioni universitarie</p>
      </div>
    </div>

    <nav class="top-actions" role="navigation" aria-label="Azioni principali">
        
        <button class="hamburger-btn" @click="toggleMenu" aria-label="Menu">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>

        <div class="nav-menu" :class="{ 'open': isMenuOpen }">
          
          <template v-if="isLoggedIn">
            <div class="logged-menu">
              <RouterLink to="/" class="menu-item" @click="closeMenu">Home</RouterLink>
              <RouterLink to="/reports" class="menu-item" v-if="isAdmin" @click="closeMenu">Segnalazioni</RouterLink>
              <RouterLink to="/booked" class="menu-item" @click="closeMenu">Lezioni Prenotate</RouterLink>
              <RouterLink :to="`/offered/${getCurrentUser().value?.email}`" class="menu-item" @click="closeMenu">Lezioni Offerte</RouterLink>
              <RouterLink :to="`/profile/${getCurrentUser().value?.email}`" class="menu-item" @click="closeMenu">Profilo</RouterLink>
              <RouterLink to="/" class="menu-item logout-btn" @click="handleLogout(); closeMenu()">Logout</RouterLink>
            </div>
          </template>

          <template v-else>
            <div class="guest-menu">
              <RouterLink to="/" class="menu-item" @click="closeMenu">Home</RouterLink>
              <RouterLink to="/login" class="menu-item" @click="closeMenu">Accedi</RouterLink>
              <RouterLink to="/register" class="menu-item" @click="closeMenu">Iscriviti</RouterLink>
            </div>
          </template>

        </div>

        <button class="theme-toggle" :class="{ dark: isDark }" @click="toggleTheme" aria-label="Cambia tema">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="5" class="sun" />
              <g class="rays">
                <line x1="12" y1="1" x2="12" y2="3"/>
                <line x1="12" y1="21" x2="12" y2="23"/>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                <line x1="1" y1="12" x2="3" y2="12"/>
                <line x1="21" y1="12" x2="23" y2="12"/>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
              </g>
            </svg>
        </button>
    </nav>
  </header>
</template>

<script setup>
import { ref } from 'vue'
import { isLoggedIn, logout } from '@/composables/auth.js'
import useDarkMode from '@/composables/useDarkMode.js'
import { getCurrentUser, isAdmin } from '@/composables/auth.js'

const { toggleTheme, isDark } = useDarkMode()

const isMenuOpen = ref(false)

function handleLogout() {
  logout()
}

function toggleMenu() {
  isMenuOpen.value = !isMenuOpen.value
}

function closeMenu() {
  isMenuOpen.value = false
}
</script>

<style scoped>
header.app-header {
  position: fixed;
  inset: 0 auto auto 0;
  width: 100%;
  z-index: 1000;
  background: var(--card);
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
}

.brand {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.brand .logo img {
  border-radius: 10px;
}

.brand h1 {
  font-size: 1.2rem;
  margin: 0;
}

.lesson-sub {
  color: var(--muted);
  font-size: 0.8rem;
}

.top-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.guest-menu {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.guest-menu .menu-item {
  padding: 0.45rem 0.9rem;
  border-radius: 9999px;
  background-color: var(--accent-light);
  color: var(--accent-dark);
  font-weight: 500;
  text-decoration: none;
  transition: all 0.2s ease;
}
.guest-menu .menu-item:hover {
  background-color: var(--accent);
  color: white;
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.logged-menu {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.logged-menu .menu-item {
  padding: 0.45rem 0.9rem;
  border-radius: 9999px;
  background-color: var(--accent-light);
  color: var(--accent-dark);
  font-weight: 500;
  text-decoration: none;
  transition: all 0.2s ease;
}
.logged-menu .menu-item:hover {
  background-color: var(--accent);
  color: white;
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}
.logout-btn {
  cursor: pointer;
  border: none;
  background-color: var(--danger-light);
  color: var(--danger-dark);
}
.logout-btn:hover {
  background-color: var(--danger);
  color: white;
}

.theme-toggle {
  width: 3rem;
  height: 3rem;
  display: flex;
  place-items: center;
  justify-content: center;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.3s ease;
}
.theme-toggle svg {
  width: 24px;
  height: 24px;
  transition: transform 0.3s ease, fill 0.3s ease, stroke 0.3s ease;
}
.theme-toggle.dark svg {
  transform: rotate(180deg);
  stroke: #f0f0f0;
  fill: #f0f0f0;
}

.hamburger-btn {
  display: none; 
  background: none;
  border: none;
  cursor: pointer;
  color: var(--accent-dark);
}

.menu-item.router-link-exact-active:not(.logout-btn) {
  background-color: color-mix(in srgb, var(--accent) 15%, transparent);
  color: var(--accent);
  font-weight: 600;
  box-shadow: none;
}

@media (max-width: 768px) {

  .lesson-sub {
    display: none;
  }

  .brand h1 {
    font-size: 1rem; 
  }

  .hamburger-btn {
    display: block;
    margin-right: 10px;
  }

  .nav-menu {
    position: absolute;
    top: 100%; 
    left: 0;
    width: 100%;
    background: var(--card); 
    box-shadow: var(--shadow-md);
    padding: 1rem;
    
    display: flex;
    flex-direction: column; 
    
    transform: translateY(-200%);
    opacity: 0;
    pointer-events: none; 
    transition: all 0.3s ease-in-out;
    z-index: 999;
  }

  .nav-menu.open {
    transform: translateY(0);
    opacity: 1;
    pointer-events: all;
  }

  .logged-menu, .guest-menu {
    flex-direction: column;
    width: 100%;
    align-items: stretch;
    gap: 10px;
  }

  .menu-item {
    text-align: center;
    width: 100%;
    display: block;
  }


}
</style>


==================================================

FILE: frontend\src\components\BanDialog.vue
--------------------
<template>
  <div class="overlay" @click.self="$emit('close')">
    <div class="dialog">

      <h2 class="title">Conferma Ban</h2>

      <p class="message">
        Vuoi davvero bannare l'utente con email:<br>
        <strong>{{ email }}</strong>?
      </p>

      <div class="actions">
        <button class="btn btn-ghost" @click="$emit('close')">Chiudi</button>
        <button class="btn btn-danger" @click="$emit('ban', email)">Banna</button>
      </div>

    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  email: { type: String, required: true }
});

defineEmits(["close", "ban"]);
</script>

<style scoped>
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.dialog {
  background: var(--card);
  padding: 1.6rem;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  max-width: 380px;
  width: 100%;
  text-align: center;
  animation: fadeIn .15s ease-out;
}

.title {
  margin: 0 0 0.6rem 0;
  font-size: 1.4rem;
  color: var(--text);
}

.message {
  color: var(--muted);
  margin-bottom: 1.4rem;
  line-height: 1.4;
}

.actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
}

.btn-danger {
  background: #dc2626;
  color: white;
  border: none;
  padding: .45rem 1rem;
  border-radius: var(--radius);
  cursor: pointer;
  transition: .2s;
}

.btn-danger:hover {
  background: #b91c1c;
}

.btn-ghost {
  background: transparent;
  border: 1px solid var(--border);
  padding: .45rem 1rem;
  border-radius: var(--radius);
  cursor: pointer;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
</style>


==================================================

FILE: frontend\src\components\BookingDialog.vue
--------------------
<template>
  <div class="booking-dialog open" role="dialog" aria-modal="true">
    <div class="booking-overlay" @click="$emit('close')"></div>

    <div class="booking-panel" role="document">
      <button class="dialog-close" aria-label="Chiudi" @click="$emit('close')">&times;</button>
      <header class="dialog-header">
        <h2>Conferma prenotazione</h2>
        <p class="dialog-sub">Sei sicuro di voler prenotare questa lezione?</p>
      </header>
      <div class="dialog-body">
        <p><strong>Lezione:</strong> {{ lesson.subject }}</p>
        <p><strong>insegnante:</strong> {{ lesson.teacher }}</p>
        <p><strong>Costo:</strong> €{{ lesson.price }}</p>
        <p><strong>durata:</strong> {{ lesson.duration }}</p>
        <p><strong>data:</strong> {{ new Date(lesson.date).toLocaleDateString('it-IT') }}</p>
        <p class="muted">Il costo sarà addebitato dal saldo interno di Smart Tutoring.</p>
      </div>
      <footer class="dialog-footer">
        <button class="btn btn-ghost" @click="$emit('close')">Annulla</button>
        <button class="btn btn-primary" @click="$emit('confirm')">Conferma e paga</button>
      </footer>
    </div>
  </div>
</template>

<script setup>
defineProps({ lesson: Object })
</script>

<style scoped>
.booking-dialog.hidden { display: none; }
.booking-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.booking-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.booking-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.booking-dialog.open .booking-panel { transform: translateY(0); }

.dialog-close {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: transparent;
  border: none;
  font-size: 1.4rem;
  line-height: 1;
  color: var(--muted);
  cursor: pointer;
  padding: .25rem;
  border-radius: 8px;
}
.dialog-close:focus { outline: 2px solid var(--accent); }

.dialog-header { margin-bottom: .5rem; }
.dialog-sub { margin: .25rem 0 0; color: var(--muted); font-size: .95rem; }

.dialog-body p { margin: .45rem 0; font-size: .95rem; }
.dialog-body .muted { color: var(--muted); font-size: .9rem; margin-top: .5rem; }

.dialog-footer {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .8rem;
}

.dialog-footer .btn:focus { outline: 3px solid color-mix(in srgb, var(--accent) 25%, transparent); outline-offset: 2px; }

@media (max-width: 520px) {
  .booking-panel { padding: .85rem; width: calc(100% - 1.6rem); }
  .dialog-footer { flex-direction: column-reverse; align-items: stretch; }
  .dialog-footer .btn { width: 100%; }
}
</style>


==================================================

FILE: frontend\src\components\CreateReportDialog.vue
--------------------
<template>
  <div class="edit-dialog open" role="dialog" aria-modal="true" @click.self="$emit('close')">
    <div class="edit-overlay" tabindex="-1"></div>

    <div class="edit-panel" role="document">
      <button class="dialog-close" aria-label="Chiudi" @click="$emit('close')">&times;</button>
      <h2 id="editTitle">Segnala utente</h2>

      <form @submit.prevent="sendReport" autocomplete="off">
        
        <div class="form-group" style="grid-column: span 2;">
          <label for="reason">Motivo</label>
          <select id="reason" v-model="form.reason" required>
            <option disabled value="">Seleziona un motivo…</option>
            <option value="contenuti-inappropriati">Contenuti inappropriati</option>
            <option value="linguaggio-offensivo">Linguaggio offensivo</option>
            <option value="comportamento-scorretto">Comportamento scorretto</option>
            <option value="spam-pubblicita">Spam / Pubblicità</option>
            <option value="altro">Altro</option>
          </select>
        </div>

        <div class="form-group" style="grid-column: span 2;">
          <label for="comment">Descrizione del problema</label>
          <textarea 
            id="comment"
            v-model="form.comment"
            rows="4"
            maxlength="500"
            placeholder="Descrivi brevemente il motivo della segnalazione…"
            required
          ></textarea>
        </div>

        <div class="dialog-actions">
          <button type="button" class="btn btn-ghost" @click="$emit('close')">Annulla</button>
          <button type="submit" class="btn btn-primary">Invia segnalazione</button>
        </div>

      </form>
    </div>
  </div>
</template>

<script setup>
import { reactive } from "vue"

const emit = defineEmits(["close", "createReport"])
const props = defineProps({
  reportedEmail: { type: String, required: true },
  reporterEmail: { type: String, required: true }
})

const form = reactive({
  reason: "",
  comment: ""
})

function sendReport() {
  if (!form.reason) {
    alert("Seleziona un motivo per il report.")
    return
  }

  const report = {
    reported: props.reportedEmail,
    reporter: props.reporterEmail,
    reason: form.reason,
    comment: form.comment,
    status: "pending",
    createdAt: new Date()
  }

  emit("createReport", report)
  emit("close")
}
</script>

<style scoped>

.edit-dialog {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.edit-dialog.open {
  display: flex;
}

.edit-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(1px);
}

.edit-panel {
  position: relative;
  background: var(--card);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: 1.5rem 1.5rem;
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 1001;
  animation: fadeIn 0.2s ease;
}

.dialog-close {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: transparent;
  border: none;
  font-size: 1.4rem;
  cursor: pointer;
  color: var(--muted);
}

.dialog-close:hover {
  color: var(--accent);
}

form {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem 1.2rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

textarea {
  resize: none;
}

.dialog-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.6rem;
  grid-column: span 2;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>


==================================================

FILE: frontend\src\components\CreateReviewDialog.vue
--------------------
<template>
  <div class="edit-dialog open" role="dialog" aria-modal="true" @click.self="$emit('close')">
    <div class="edit-overlay" tabindex="-1"></div>

    <div class="edit-panel" role="document">
      <button class="dialog-close" aria-label="Chiudi" @click="$emit('close')">&times;</button>
      <h2 id="editTitle">Lascia una recensione</h2>

      <form @submit.prevent="saveReview" autocomplete="off">
        
        <div class="form-group rating-group" style="grid-column: span 2;">
          <label>Valutazione</label>
          <div class="stars">
            <span 
              v-for="n in 5" 
              :key="n" 
              class="star" 
              :class="{ active: n <= form.rating }"
              @click="form.rating = n"
            >
              ★
            </span>
          </div>
        </div>

        <div class="form-group" style="grid-column: span 2;">
          <label for="comment">Commento</label>
          <textarea 
            id="comment" 
            v-model="form.comment" 
            rows="4" 
            maxlength="300"
            placeholder="Scrivi un commento (opzionale)..."
          ></textarea>
        </div>

        <div class="dialog-actions">
          <button type="button" class="btn btn-ghost" @click="$emit('close')">Annulla</button>
          <button type="submit" class="btn btn-primary">Invia recensione</button>
        </div>

      </form>
    </div>
  </div>
</template>

<script setup>
import { reactive } from 'vue'

const emit = defineEmits(["close", "createReview"])

const props = defineProps({
  teacherEmail: String,   
  studentEmail: String    
})

const form = reactive({
  rating: 0,
  comment: ""
})

function saveReview() {
  // Validazione
  if (form.rating < 1 || form.rating > 5) {
    // 2️⃣ Sostituito alert() con il toast di avviso
    emit('show-toast', "⚠️ Per favore seleziona una valutazione da 1 a 5 stelle.")
    return
  }

  const review = {
    teacher: props.teacherEmail,
    student: props.studentEmail,
    rating: form.rating,
    comment: form.comment
  }

  // 3️⃣ Emetto l'evento di creazione
  emit("createReview", review)



  // Chiudo il dialog
  emit("close")
}
</script>

<style scoped>
/* Usa il tuo CSS esistente e aggiungo solo la parte della valutazione */

/* Stelle rating */
.stars {
  display: flex;
  gap: 0.3rem;
  cursor: pointer;
  font-size: 1.8rem;
  user-select: none;
}

.star {
  color: #ccc;
  transition: color 0.2s;
}

.star.active {
  color: #f4b400; /* giallo stella */
}

.star:hover {
  color: #f4b400;
}

/* Mantengo tutto il tuo stile originale */
.edit-dialog {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.edit-dialog.open {
  display: flex;
}

.edit-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(1px);
}

.edit-panel {
  position: relative;
  background: var(--card);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: 1.5rem 1.5rem;
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 1001;
  animation: fadeIn 0.2s ease;
}

.dialog-close {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: transparent;
  border: none;
  font-size: 1.4rem;
  cursor: pointer;
  color: var(--muted);
}

.dialog-close:hover {
  color: var(--accent);
}

form {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem 1.2rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

textarea {
  resize: none;
}

.dialog-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.6rem;
  grid-column: span 2;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

==================================================

FILE: frontend\src\components\EditLessonDialog.vue
--------------------
<template>
  <div class="publish-dialog open" role="dialog" aria-modal="true" aria-labelledby="publishTitle" @click.self="$emit('close')">
    <div class="publish-overlay" tabindex="-1"></div>

    <div class="publish-panel" role="document">
      <button class="dialog-close" aria-label="Chiudi finestra" @click="$emit('close')">&times;</button>
      <h2 id="publishTitle">
        {{ lesson ? 'Modifica lezione' : 'Pubblica nuova lezione' }}
      </h2>

      <form id="publishForm" autocomplete="off" @submit.prevent="submitLesson">

        <label for="lessonCourse">Corso</label>
        <select id="lessonCourse" v-model="lessonUpdate.course" required>
          <option value="">Seleziona un corso...</option>
          <option 
            v-for="matter in matters" 
            :key="matter" 
            :value="matter"
          >
            {{ matter }}
          </option>
        </select>

        <label>Data</label>
        <div class="custom-date-wrapper" @click="openCalendar">
          <div class="fake-input" :class="{ 'has-value': lessonUpdate.date }">
            {{ formattedDateLabel }}
          </div>
          
          <input
            ref="dateInputRef"
            type="date"
            id="lessonDate"
            v-model="lessonUpdate.date"
            :min="today"
            :max="maxDate"
            required
            class="ghost-date-input"
            @click.stop
          />
          
          <span v-if="!lessonUpdate.date" class="calendar-icon">📅</span>
        </div>

        <label for="lessontime">Ora inizio</label>
        <select id="lessontime" v-model="lessonUpdate.time" required>
          <option value="">Seleziona...</option>
          <option v-for="time in timeOptions" :key="time" :value="time">{{ time }}</option>
        </select>

        <label for="lessonDuration">Durata</label>
        <select id="lessonDuration" v-model="lessonUpdate.duration" required>
          <option value=30>30 minuti</option>
          <option value=45>45 minuti</option>
          <option value=60>60 minuti</option>
          <option value=90>90 minuti</option>
          <option value=120>120 minuti</option>
          <option value=180>180 minuti</option>
        </select>

        <label for="lessonPrice">Prezzo (€)</label>
        <input
          type="number"
          id="lessonPrice"
          v-model.number="lessonUpdate.price"
          min="1"
          step="1"
          required
        />

        <div class="dialog-actions">
          <button type="button" id="dlgCancelPub" class="btn btn-ghost" @click="$emit('close')">
            Annulla
          </button>
          <button type="submit" class="btn btn-primary">
            {{ lesson ? 'Salva modifiche' : 'Pubblica' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</template>

<script setup>
import { reactive, computed, ref } from 'vue'
import { getCurrentUser, matters } from '../composables/auth'

const props = defineProps({ lesson: Object })
const emit = defineEmits(['close', 'modify']) 
const dateInputRef = ref(null)

const now = new Date()
const today = now.toISOString().split('T')[0]
const maxDate = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000)
  .toISOString()
  .split('T')[0]

const timeOptions = computed(() => {
  const times = []
  for (let h = 7; h <= 22; h++) {
    for (let m of [0, 15, 30, 45]) {
      if (h === 22 && m > 0) break
      const hh = String(h).padStart(2, '0')
      const mm = String(m).padStart(2, '0')
      times.push(`${hh}:${mm}`)
    }
  }
  return times
})

const lessonUpdate = reactive({
  teacher: getCurrentUser().value?.email,
  course: '',
  date: '',
  time: '',
  duration: 60,
  price: 15
})

if (props.lesson) {
  Object.assign(lessonUpdate, {
    teacher: props.lesson.teacher,
    course: props.lesson.subject,
    date: props.lesson.date?.split('T')[0] ?? '',
    time: props.lesson.time,
    duration: props.lesson.duration,
    price: props.lesson.price
  })
}

const formattedDateLabel = computed(() => {
  if (!lessonUpdate.date) return 'Seleziona data...';
  try {
    const [year, month, day] = lessonUpdate.date.split('-');
    return `${day}/${month}/${year}`;
  } catch (e) {
    return lessonUpdate.date;
  }
})

function openCalendar() {
  if (dateInputRef.value) {
    if (typeof dateInputRef.value.showPicker === 'function') {
      dateInputRef.value.showPicker();
    } else {
      dateInputRef.value.focus();
    }
  }
}

function submitLesson() {
  if (!lessonUpdate.course || !lessonUpdate.date || !lessonUpdate.time || !lessonUpdate.duration || !lessonUpdate.price) return

  const payload = {
    _id: props.lesson?._id || undefined,
    teacher: lessonUpdate.teacher,
    subject: lessonUpdate.course,
    time: lessonUpdate.time,
    date: lessonUpdate.date,
    duration: lessonUpdate.duration,
    price: lessonUpdate.price
  }

  emit('modify', payload)
  emit('close')
}
</script>

<style scoped>
.publish-dialog.hidden { display: none; }
.publish-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.publish-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.publish-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.publish-dialog.open .publish-panel {
  transform: translateY(0);
}

.publish-panel label {
  display: block;
  margin-top: .6rem;
  font-weight: 500;
}

.publish-panel input:not(.ghost-date-input),
.publish-panel select {
  width: 100%;
  margin-top: .25rem;
  padding: .5rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--bg);
  color: var(--text);
  font-family: inherit;
  box-sizing: border-box;
}

.publish-panel input:focus,
.publish-panel select:focus {
  outline: 2px solid var(--accent);
  border-color: var(--accent);
}

.custom-date-wrapper {
  position: relative;
  width: 100%;
  margin-top: .25rem;
  cursor: pointer;
}

.fake-input {
  width: 100%;
  padding: .5rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--bg);
  color: var(--muted, #888); 
  font-family: inherit;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  min-height: 38px;
}

.fake-input.has-value {
  color: var(--text);
}

.ghost-date-input {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  z-index: 10;
  pointer-events: none;
}

.calendar-icon {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-size: 1rem;
  opacity: 0.6;
}

.publish-panel .dialog-actions {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .9rem;
}

.publish-panel .dialog-close {
  position: absolute;
  top: .5rem;
  right: .5rem;
  font-size: 1.4rem;
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  border-radius: 8px;
}

.publish-panel .dialog-close:hover {
  color: var(--text);
}

@media (max-width: 520px) {
  .publish-panel { width: calc(100% - 1.4rem); padding: .9rem; }
  .publish-panel .dialog-actions { flex-direction: column-reverse; }
  .publish-panel .dialog-actions .btn { width: 100%; }
}
</style>

==================================================

FILE: frontend\src\components\EditProfileDialog.vue
--------------------
<template>
  <div class="edit-dialog open" role="dialog" aria-modal="true" @click.self="$emit('close')">
    <div class="edit-overlay" tabindex="-1"></div>

    <div class="edit-panel" role="document">
      <div class="panel-header">
        <h2 id="editTitle">Modifica profilo</h2>
        <button class="dialog-close" aria-label="Chiudi" @click="$emit('close')">&times;</button>
      </div>

      <form @submit.prevent="saveChanges" autocomplete="off">
        <div class="profile-pic-wrapper">
          <img
            :src="photoPreview || photouser || defaultPhoto"
            alt="Immagine del profilo"
            class="profile-pic"
          />
          <label for="uploadPic" class="edit-icon" title="Modifica immagine profilo">✎</label>
          <input type="file" id="uploadPic" accept="image/*" @change="onFileChange" hidden />
        </div>

        <div class="form-group">
          <label for="firstname">Nome</label>
          <input type="text" id="firstname" v-model="form.firstname" required />
        </div>

        <div class="form-group">
          <label for="lastname">Cognome</label>
          <input type="text" id="lastname" v-model="form.lastname" required />
        </div>

        <div class="form-group">
          <label for="degreeType">Tipo di corso</label>
          <select id="degreeType" v-model="form.degreeType" required>
            <option value="triennale">Triennale</option>
            <option value="magistrale">Magistrale</option>
            <option value="dottorato">Dottorato</option>
          </select>
        </div>

        <div class="form-group">
          <label for="birthDate">Data di nascita</label>
          <input type="date" id="birthDate" v-model="form.birthDate" />
        </div>

        <div class="form-group">
          <label for="averageGrade">Media universitaria</label>
          <input type="number" id="averageGrade" v-model.number="form.averageGrade" min="18" max="30" step="0.1" />
        </div>

        <div class="form-group full-width">
          <label for="bio">Breve bio</label>
          <textarea id="bio" v-model="form.bio" rows="3" maxlength="300"></textarea>
        </div>

        <div class="dialog-actions">
          <button type="button" class="btn btn-ghost" @click="$emit('close')">Annulla</button>
          <button type="submit" class="btn btn-primary">Salva modifiche</button>
        </div>
      </form>
    </div>
  </div>
</template>

<script setup>
import { reactive, ref, watch } from 'vue'
import defaultPhotoPath from '@/assets/images/user.png'
import { toBase64 } from '@/composables/auth'
import { computed } from 'vue'

const emit = defineEmits(['close', 'save'])
const props = defineProps({
  user: { type: Object, required: true }
})

const defaultPhoto = defaultPhotoPath
const photoPreview = ref(null);

const photouser = computed(() =>
  props.user.photo && props.user.photo !== "null"
    ? "http://localhost:4000" + props.user.photo
    : defaultPhoto
);

const form = reactive({
  firstname: props.user.firstName || '',
  lastname: props.user.lastName || '',
  degreeType: props.user.degreeType || '',
  birthDate: props.user.birthDate || '',
  averageGrade: props.user.averageGrade || null,
  bio: props.user.bio || '',
  photo: null
})

function onFileChange(e) {
  const file = e.target.files[0]
  if (!file) return
  form.photo = file
  photoPreview.value = URL.createObjectURL(file)
}

async function saveChanges() {
  const photoBase64 = form.photo ? await toBase64(form.photo) : null;
  const updatedUser = {
    ...props.user,
    firstName: form.firstname,
    lastName: form.lastname,
    degreeType: form.degreeType,
    birthDate: form.birthDate,
    averageGrade: form.averageGrade,
    bio: form.bio,
    photo: photoBase64 || props.user.photo
  }
  emit('save', updatedUser)
  emit('close')
}
</script>

<style scoped>
.edit-dialog {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: flex-start; 
}

.edit-dialog.open {
  display: flex;
}

.edit-overlay {
  display: none; 
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(2px);
}

.edit-panel {
  position: relative;
  background: var(--bg); 
  width: 100%;
  height: 100%; 
  padding: 1rem;
  overflow-y: auto; 
  z-index: 1001;
  display: flex;
  flex-direction: column;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  position: sticky;
  top: 0;
  background: var(--bg);
  z-index: 10;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border);
}

#editTitle {
  margin: 0;
  font-size: 1.25rem;
}

.dialog-close {
  background: transparent;
  border: none;
  font-size: 2rem;
  color: var(--text);
  line-height: 1;
  padding: 0 0.5rem;
  cursor: pointer;
}

form {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding-bottom: 2rem; 
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.form-group label {
  font-weight: 500;
  font-size: 0.9rem;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 0.75rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--card); 
  color: var(--text);
  font-size: 1rem;
  font-family: inherit;
  box-sizing: border-box;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: 2px solid var(--accent);
  border-color: var(--accent);
}

.profile-pic-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  margin: 1rem 0;
}

.profile-pic {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--card);
  box-shadow: 0 0 0 2px var(--accent-light);
}

.edit-icon {
  position: absolute;
  bottom: 0;
  transform: translateX(35px);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1rem;
  box-shadow: var(--shadow-sm);
}

.dialog-actions {
  display: flex;
  flex-direction: column-reverse;
  gap: 0.75rem;
  margin-top: 1.5rem;
}

.dialog-actions .btn {
  width: 100%;
  justify-content: center;
  padding: 1rem; 
  font-size: 1rem;
}

@media(min-width: 600px) {
  .edit-dialog {
    align-items: center; 
    padding: 1rem;
  }

  .edit-overlay {
    display: block; 
  }

  .edit-panel {
    background: var(--card); 
    width: 100%;
    height: auto;
    max-width: 650px;
    max-height: 90vh; 
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    padding: 2rem;
  }

  .panel-header {
    margin-bottom: 2rem;
    border-bottom: none;
    position: static;
    background: transparent;
    padding-bottom: 0;
  }
  
  
  form {
    grid-template-columns: 1fr 1fr;
    gap: 1.25rem;
    padding-bottom: 0;
  }

  .profile-pic-wrapper,
  .full-width,
  .dialog-actions {
    grid-column: span 2;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 0.5rem; 
    background: var(--bg);
  }

  .dialog-actions {
    flex-direction: row;
    justify-content: flex-end;
    margin-top: 1rem;
  }

  .dialog-actions .btn {
    width: auto;
    padding: 0.5rem 1.25rem;
  }
}
</style>

==================================================

FILE: frontend\src\components\FooterNote.vue
--------------------
<template>
    <footer class="footer-note">© Progetto universitario — Applicazioni e Servizi Web</footer>
</template>

<style scoped>
.footer-note {
  text-align: center;
  color: var(--muted);
  font-size: .85rem;
  padding: 2rem 1rem;
}
</style>

==================================================

FILE: frontend\src\components\LessonCard.vue
--------------------
<template>
  <article class="lesson-card" :data-id="lesson.id">
    <div class="lesson-content">
      <div class="lesson-header">
        <h3 class="lesson-title">{{ lesson.subject }}</h3>
        <div class="lesson-info">
          <span class="time">{{ lesson.time }}</span>
          <span class="duration">{{ lesson.duration }} min</span>
          <span class="price">€{{ lesson.price }}</span>
          <span class="date">
            {{ new Date(lesson.date).toLocaleDateString('it-IT') }}
          </span>
        </div>
      </div>

      <div 
      v-if="mode !== 'offered'"
      class="lesson-footer">
        <div class="lesson-author">{{ lesson.teacher }}</div>
        <div class="card-actions">
          <RouterLink :to="`/profile/${lesson.teacher}`" class="small btn-ghost" aria-label="Vedi profilo">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 viewBox="0 0 24 24">
              <path d="M20 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M4 21v-2a4 4 0 0 1 3-3.87"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </RouterLink>
          <button 
            v-if="mode === 'available'"
            class="small btn-primary" 
            @click="$emit('book', lesson)"
          >
            Prenota
          </button>
        </div>
      </div>
      <div
      v-else-if="mode === 'offered' && lesson.student"
      class="lesson-footer">
        <div class="lesson-author">{{ lesson.student }}</div>
        <div class="card-actions">
          <RouterLink :to="`/profile/${lesson.student}`" class="small btn-ghost" aria-label="Vedi profilo">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 viewBox="0 0 24 24">
              <path d="M20 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M4 21v-2a4 4 0 0 1 3-3.87"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </RouterLink>
          <button 
            class="small btn-primary" 
            disabled
          >
            Prenotata
          </button>
        </div>
      </div>
      <div
      v-else
      class="lesson-footer">
        <div class="lesson-author">Non ancora prenotata</div>
        <div class="card-actions">
          <button 
            class="small btn-ghost" 
            aria-label="Modifica lezione"
            @click="$emit('edit', lesson)"
          >
          Modifica
          </button>
        </div>
      </div>
    </div>
  </article>
</template>

<script setup>
import { RouterLink } from 'vue-router';

const props = defineProps({
  lesson: Object,
  mode: {
    type: String,
    default: "available"  
  }
})

const emit = defineEmits(["book", "edit"])
</script>

<style scoped>
.lesson-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  padding: 0.85rem 1rem;
  transition: transform .2s ease, box-shadow .2s ease;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.6rem;
  min-height: 110px;
}

.lesson-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.lesson-card.removing {
  opacity: 0;
  transform: translateY(-6px) scale(.995);
  transition: opacity .18s ease, transform .18s ease;
}

.lesson-content {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.6rem;
  height: 100%;
}

.lesson-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 0.25rem;
}

.lesson-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-top: 0.2rem;
}

.lesson-line {
  display: grid;
  grid-template-columns: 2fr 1fr auto;
  align-items: center;
  gap: .75rem;
}

.lesson-title {
  font-weight: 600;
  font-size: 0.95rem;
  margin: 0;
}

.lesson-info {
  display: flex;
  gap: 0.5rem;
  color: var(--muted);
  font-size: 0.75rem;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.lesson-author {
  font-weight: 500;
  color: var(--muted);
  font-size: 0.85rem;
}

.card-actions {
  display: flex;
  gap: .4rem;
}

.small {
  font-size: .85rem;
  padding: .3rem .6rem;
}

.card-actions svg {
  width: 18px;
  height: 18px;
}

.btn-ghost svg {
  transition: transform 0.2s ease, color 0.2s ease;
}

.btn-ghost:hover svg {
  transform: scale(1.1);
  color: var(--accent);
}

@media (max-width: 600px) {
  .lesson-header, .lesson-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.4rem;
  }
  .lesson-info {
    justify-content: flex-start;
  }
  .card-actions {
    width: 100%;
    justify-content: flex-end;
  }
}

@media (min-width: 880px) {
  .lesson-line {
    grid-template-columns: 1fr auto;
    gap: .5rem;
  }
}

html[data-theme='light'] button:disabled {
  background-color: #d1fae5; 
  color: #15803d;            
  border: 1px solid #15803d;
  opacity: 0.6;
  cursor: not-allowed;
}

html[data-theme='dark'] button:disabled {
  background-color: #1e3a2f; 
  color: #4ade80;            
  border: 1px solid #4ade80;
  opacity: 0.6;
  cursor: not-allowed;
}
</style>

==================================================

FILE: frontend\src\components\PersonalProfile.vue
--------------------
<template>
  <section class="profile-card" aria-describedby="profileInfo">
    <EditProfileDialog
          v-if="editProfileDialog.visible"
          :user="user"
          @close="editProfileDialog.visible = false"
          @save="updateUser"
        />

    <div class="profile-header">
      <img
        :src="photoUrl"
        :alt="`Foto profilo di ${user.firstName} ${user.lastName}`"
        class="profile-photo"
      />

      <div class="profile-main">
        <h2 class="profile-name">{{ user.firstName }} {{ user.lastName }}</h2>
        <p class="profile-role">{{ fullDegreeInfo }}</p>

        <div class="profile-rating" aria-label="Valutazione media utente">
          <span class="stars">{{ '★'.repeat(roundedRating) + '☆'.repeat(5 - roundedRating) }}</span>
          <span class="rating-value">({{ 0 }} / 5)</span>
          <span class="rating-count">• {{ 0 }} valutazioni</span>
        </div>
      </div>
    </div>

    <hr />

    <div id="profileInfo" class="profile-info">
      <div class="info-item">
        <strong>Email:</strong>
        <span>{{ user.email || '—' }}</span>
      </div>
      <div class="info-item" v-if="user.birthDate">
        <strong>Data di nascita:</strong>
        <span>{{ new Date(user.birthDate).toLocaleDateString('it-IT') || '—' }}</span>
      </div>
      <div class="info-item" v-if="user?.averageGrade">
        <strong>Media universitaria:</strong>
        <span>{{ user.averageGrade }}/30</span>
      </div>
    </div>

    <div v-if="user.bio" class="profile-bio">
      <h3>Bio</h3>
      <p>{{ user.bio }}</p>
    </div>

    <div class="profile-actions">
      <button class="btn btn-primary" @click="openEditProfile()">Modifica profilo</button>

    </div>
  </section>
</template>

<script setup>
import { computed } from 'vue'
import defaultPhotoPath from '@/assets/images/user.png'
import EditProfileDialog from '@/components/EditProfileDialog.vue'
import { ref, inject } from 'vue'
import { getCurrentUser } from '@/composables/auth.js'

const socket = inject("socket");

const editProfileDialog = ref({ visible: false })

const props = defineProps({
  user: { type: Object, required: true }
})

const defaultPhoto = defaultPhotoPath
const roundedRating = computed(() => Math.round(props.user?.avgRating || 0))
const photoUrl = computed(() =>
  props.user.photo && props.user.photo !== "null"
    ? "http://localhost:4000" + props.user.photo
    : defaultPhoto
);


const fullDegreeInfo = computed(() => {
  const degree = props.user.degreeType
  if (!degree) return '—'
  const formatted =
    degree === 'triennale' || degree === 'magistrale'
      ? `Studente ${degree.charAt(0).toUpperCase() + degree.slice(1)}`
      : degree.charAt(0).toUpperCase() + degree.slice(1)
  return `${formatted} — Ingegneria e Scienze Informatiche`
})

function openEditProfile() {
  editProfileDialog.value.visible = true
}

function updateUser(updatedUser) {
  socket.emit("user:updateProfile", getCurrentUser().value?.email, updatedUser, (response) => {
    if (!response.success) {
      console.error("Errore durante l'aggiornamento del profilo:", response.error);
      return;
    }
    getCurrentUser().value = response.data;
    props.user = response.data;
  }); 
  editProfileDialog.value.visible = false
}
</script>

<style scoped>
.profile-card {
  background: var(--card);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
  padding: 2rem;
  max-width: 850px;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  transition: all 0.3s ease;
}

.profile-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-xl);
}

.profile-header {
  display: flex;
  align-items: flex-start;
  gap: 1.5rem;
  flex-wrap: wrap;
}

.profile-photo {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: var(--shadow-md);
  border: 3px solid var(--accent-light);
}

.profile-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

.profile-name,
.profile-role,
.profile-rating {
  text-align: left;
}

.profile-name {
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--text);
  line-height: 1.1;
}

.profile-role {
  font-size: 1rem;
  color: var(--muted);
}

.profile-rating {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  margin-top: 0.4rem;
}

.stars {
  color: #facc15;
  font-size: 1.1rem;
}

.rating-value {
  font-weight: 600;
  color: var(--text);
  font-size: 0.95rem;
}

.rating-count {
  color: var(--muted);
  font-size: 0.9rem;
}

.profile-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1rem 2rem;
}

.info-item strong {
  color: var(--text);
  margin-bottom: 0.3rem;
  display: block;
}

.info-item span {
  color: var(--muted);
  font-size: 0.95rem;
}

.profile-bio {
  background: var(--surface);
  border-radius: var(--radius);
  padding: 1rem 1.2rem;
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-sm);
}

.profile-bio h3 {
  margin: 0 0 0.4rem 0;
  font-size: 1.1rem;
  color: var(--text);
}

.profile-bio p {
  margin: 0;
  color: var(--muted);
  line-height: 1.5;
  white-space: pre-wrap;
}

.profile-actions {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  flex-wrap: wrap;
  margin-top: 1rem;
}

@media (max-width: 700px) {
  .profile-card {
    padding: 1.5rem 1rem;
  }

  .profile-header {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .profile-photo {
    width: 100px;
    height: 100px;
  }

  .profile-name {
    font-size: 1.4rem;
  }

  .profile-actions {
    justify-content: center;
  }
}
</style>


==================================================

FILE: frontend\src\components\PublicProfile.vue
--------------------
<template>
  <CreateReviewDialog
    v-if="createReviewDialog.visible"
    :teacherEmail="user?.email"
    :studentEmail="getCurrentUser().value?.email"
    @createReview="createReview"
    @close="createReviewDialog.visible = false"
    @show-toast="$emit('show-toast', $event)" 
  />

  <CreateReportDialog
    v-if="createReportDialog.visible"
    :reportedEmail="user?.email"
    :reporterEmail="getCurrentUser().value?.email"
    @createReport="createReport"
    @close="createReportDialog.visible = false"
    @show-toast="$emit('show-toast', $event)"
  /> 
  
  <BanDialog
    v-if="isAdmin && banDialogVisible.visible"
    :email="user?.email"
    @ban="banUser"
    @close="banDialogVisible.visible = false"
    @show-toast="$emit('show-toast', $event)"
  />

  <section class="profile-card" aria-describedby="profileInfo">
    <div class="profile-header">
      <img
        :src="photoUrl"
        :alt="`Foto profilo di ${user?.firstName} ${user?.lastName}`"
        class="profile-photo"
      />

      <div class="profile-main">
        <h2 class="profile-name">{{ user?.firstName }} {{ user?.lastName }}</h2>
        <p class="profile-role">{{ fullDegreeInfo }}</p>

        <div class="profile-rating" aria-label="Valutazione media utente">
          <span class="stars">{{ '★'.repeat(roundedRating) + '☆'.repeat(5 - roundedRating) }}</span>
          <span class="rating-value">({{ (user?.avgRating || 0).toFixed(2) }} / 5)</span>
          <span class="rating-count">• {{  user?.numReviews || 0 }} valutazioni</span>
        </div>
      </div>
    </div>

    <hr />

    <!-- INFO -->
    <div id="profileInfo" class="profile-info">
      <div class="info-item">
        <strong>Email:</strong>
        <span>{{ user?.email || '—' }}</span>
      </div>
      <div class="info-item" v-if="user?.birthDate">
        <strong>Data di nascita:</strong>
        <span>{{ new Date(user?.birthDate).toLocaleDateString('it-IT') || '—' }}</span>
      </div>
      <div class="info-item" v-if="user.averageGrade">
        <strong>Media universitaria:</strong>
        <span>{{ user.averageGrade }}/30</span>
      </div>
    </div>

    <!-- BIO (se presente) -->
    <div v-if="user?.bio" class="profile-bio">
      <h3>Bio</h3>
      <p>{{ user?.bio }}</p>
    </div>

    <!-- ACTIONS -->
    <div class="profile-actions">
      <button class="btn btn-ghost" v-if="getCurrentUser()?.value && !isAdmin.value" @click="openCreateReport()">Segnala Profilo</button>
      <button class="btn btn-ghost" v-if="isAdmin" @click="openBan()">Banna</button>
      <button class="btn btn-primary" @click="goToLessons()">Visualizza lezioni</button>
      <button class="btn btn-primary" v-if="getCurrentUser().value" @click="openCreateReview()">Crea recensione</button>
    </div>
  </section>
</template>

<script setup>
import { computed, ref, inject } from 'vue'
import { useRouter } from 'vue-router';
import defaultPhotoPath from '@/assets/images/user.png'
import CreateReviewDialog from '@/components/CreateReviewDialog.vue'
import CreateReportDialog from '@/components/CreateReportDialog.vue'
import BanDialog from './BanDialog.vue'
import { getCurrentUser, isAdmin } from '@/composables/auth.js'

const emit = defineEmits(['show-toast']);

const props = defineProps({
  user: { type: Object, required: true },
  isLogged: { type: Boolean, required: true }
})

const router = useRouter();
const socket = inject("socket");

const createReviewDialog = ref({ visible: false })
const createReportDialog = ref({ visible: false })
const banDialogVisible = ref({ visible: false })

const defaultPhoto = defaultPhotoPath

const photoUrl = computed(() =>
  props.user.photo && props.user.photo !== "null"
    ? "http://localhost:4000" + props.user.photo
    : defaultPhoto
);

const roundedRating = computed(() => Math.round(props.user?.avgRating || 0))

const fullDegreeInfo = computed(() => {
  const degree = props.user?.degreeType
  if (!degree) return '—'
  const formatted =
    degree === 'triennale' || degree === 'magistrale'
      ? `Studente ${degree.charAt(0).toUpperCase() + degree.slice(1)}`
      : degree.charAt(0).toUpperCase() + degree.slice(1)
  return `${formatted} — Ingegneria e Scienze Informatiche`
})

function goToLessons() {
  router.push(`/offered/${props.user?.email}`);
}

function openCreateReview() {
  createReviewDialog.value.visible = true
}

function openCreateReport() {
  createReportDialog.value.visible = true
}

function openBan() {
  banDialogVisible.value.visible = true
}


function createReview(newReview) {
  socket.emit("review:create", newReview, (response) => {
    if (!response.success) {
      emit('show-toast', "❌ Errore durante la pubblicazione della recensione.");
      return;
    }
    emit('show-toast', "✅ Recensione pubblicata con successo!");
  }); 
  createReviewDialog.value.visible = false
}

function createReport(newReport) {
  socket.emit("report:create", newReport, (response) => {
    if (!response.success) {
      emit('show-toast', "❌ Errore durante la segnalazione.");
      return;
    }
    emit('show-toast', "✅ Segnalazione inviata agli amministratori.");
  }); 
  createReportDialog.value.visible = false
}

function banUser(email) {
  socket.emit("user:delete", { email: getCurrentUser().value.email, targetEmail: email }, (response) => {
    if (!response.success) {
      emit('show-toast', "❌ Errore durante il ban.");
      return;
    }
    emit('show-toast', "⛔ Utente bannato correttamente.");
    router.push("/");
  }); 
  banDialogVisible.value.visible = false
}
</script>

<style scoped>

.profile-card {
  background: var(--card);
  border-radius: var(--radius-xl);
  padding: 1.4rem;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
}

.profile-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.profile-photo {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--accent-light);
}

.profile-name,
.profile-role,
.profile-rating {
  text-align: center;
}

.profile-name {
  font-size: 1.3rem;
  font-weight: 700;
}

.profile-role {
  font-size: 0.95rem;
  color: var(--muted);
}

.profile-rating {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
}

.stars {
  color: #facc15;
  font-size: 1.05rem;
}

.rating-value {
  font-weight: 600;
}

.rating-count {
  color: var(--muted);
  font-size: 0.85rem;
}

.profile-info {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.info-item strong {
  color: var(--text);
  display: block;
  margin-bottom: 0.2rem;
}

.info-item span {
  color: var(--muted);
  font-size: 0.95rem;
}

.profile-bio {
  background: var(--surface);
  border-radius: var(--radius);
  padding: 1rem;
  border: 1px solid var(--border-light);
}

.profile-bio h3 {
  font-size: 1.05rem;
  margin-bottom: 0.4rem;
}

.profile-bio p {
  margin: 0;
  line-height: 1.5;
}

.profile-actions {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  margin-top: 1rem;
}

.profile-actions .btn {
  width: 100%;
}

@media (min-width: 600px) {
  .profile-card {
    padding: 1.8rem;
    border-radius: var(--radius-xl);
  }

  .profile-actions {
    flex-direction: row;
    justify-content: flex-end;
  }

  .profile-actions .btn {
    width: auto;
  }
}


@media (min-width: 900px) {
  .profile-header {
    flex-direction: row;
    align-items: flex-start;
    text-align: left;
  }

  .profile-photo {
    width: 120px;
    height: 120px;
  }

  .profile-main {
    flex: 1;
  }

  .profile-name,
  .profile-role,
  .profile-rating {
    text-align: left;
  }

  .profile-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.2rem 2rem;
  }

  .profile-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    transition: 0.25s ease;
  }
}
</style>


==================================================

FILE: frontend\src\components\PublishDialog.vue
--------------------
<template>
  <div class="publish-dialog open" role="dialog" aria-modal="true" aria-labelledby="publishTitle" @click.self="$emit('close')">
    <div class="publish-overlay" tabindex="-1"></div>

    <div class="publish-panel" role="document">
      <button class="dialog-close" aria-label="Chiudi finestra" @click="$emit('close')">&times;</button>
      <h2 id="publishTitle">Pubblica nuova lezione</h2>

      <form id="publishForm" autocomplete="off" @submit.prevent="submitLesson">

        <label for="lessonCourse">Corso</label>
        <select id="lessonCourse" v-model="lesson.course" required>
          <option value="">Seleziona un corso...</option>
          <option 
            v-for="matter in matters" 
            :key="matter" 
            :value="matter"
          >
            {{ matter }}
          </option>
        </select>

        <label>Data</label>
        <div class="custom-date-wrapper" @click="openCalendar">
          <div class="fake-input" :class="{ 'has-value': lesson.date }">
            {{ formattedDateLabel }}
          </div>
          
          <input
            ref="dateInputRef"
            type="date"
            id="lessonDate"
            v-model="lesson.date"
            :min="today"
            :max="maxDate"
            required
            class="ghost-date-input"
            @click.stop
          />
          
          <span v-if="!lesson.date" class="calendar-icon">📅</span>
        </div>

        <label for="lessontime">Ora inizio</label>
        <select id="lessontime" v-model="lesson.time" required>
          <option value="">Seleziona...</option>
          <option v-for="time in timeOptions" :key="time" :value="time">{{ time }}</option>
        </select>

        <label for="lessonDuration">Durata</label>
        <select id="lessonDuration" v-model="lesson.duration" required>
          <option value=30>30 minuti</option>
          <option value=45>45 minuti</option>
          <option value=60>60 minuti</option>
          <option value=90>90 minuti</option>
          <option value=120>120 minuti</option>
          <option value=180>180 minuti</option>
        </select>

        <label for="lessonPrice">Prezzo (€)</label>
        <input
          type="number"
          id="lessonPrice"
          v-model.number="lesson.price"
          min="1"
          step="1"
          required
        />

        <div class="dialog-actions">
          <button type="button" id="dlgCancelPub" class="btn btn-ghost" @click="$emit('close')">
            Annulla
          </button>
          <button type="submit" class="btn btn-primary">Pubblica</button>
        </div>
      </form>
    </div>
  </div>
</template>

<script setup>
import { reactive, computed, ref } from 'vue'
import { getCurrentUser, matters } from '../composables/auth'

const emit = defineEmits(['close', 'publish'])
const dateInputRef = ref(null)

const now = new Date()
const today = now.toISOString().split('T')[0]
const maxDate = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000)
  .toISOString()
  .split('T')[0]

const timeOptions = computed(() => {
  const times = []
  for (let h = 7; h <= 22; h++) {
    for (let m of [0, 15, 30, 45]) {
      if (h === 22 && m > 0) break
      const hh = String(h).padStart(2, '0')
      const mm = String(m).padStart(2, '0')
      times.push(`${hh}:${mm}`)
    }
  }
  return times
})

const lesson = reactive({
  teacher: getCurrentUser().value?.email,
  course: '',
  date: '',
  time: '',
  duration: '1 ora',
  price: 15
})

const formattedDateLabel = computed(() => {
  if (!lesson.date) return 'Seleziona data...';
  try {
    const [year, month, day] = lesson.date.split('-');
    return `${day}/${month}/${year}`;
  } catch (e) {
    return lesson.date;
  }
})

function openCalendar() {
  if (dateInputRef.value) {
    if (typeof dateInputRef.value.showPicker === 'function') {
      dateInputRef.value.showPicker();
    } else {
      dateInputRef.value.focus();
    }
  }
}

function submitLesson() {
  if (!lesson.course || !lesson.date || !lesson.time || !lesson.duration || !lesson.price) return

  emit('publish', {
    teacher: lesson.teacher,
    subject: lesson.course,
    time: lesson.time,
    date: lesson.date,
    duration: lesson.duration,
    price: lesson.price || 15
  })

  emit('close')
}
</script>

<style scoped>
.publish-dialog.hidden { display: none; }
.publish-dialog {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: inherit;
}

.publish-overlay {
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, black 40%, transparent);
  backdrop-filter: blur(2px);
}

.publish-panel {
  position: relative;
  background: var(--card);
  color: var(--text);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.15rem;
  width: min(520px, calc(100% - 2rem));
  box-shadow: var(--shadow-md);
  z-index: 1101;
  transform: translateY(6px);
  transition: transform .18s ease, opacity .18s ease;
}

.publish-dialog.open .publish-panel {
  transform: translateY(0);
}

.publish-panel label {
  display: block;
  margin-top: .6rem;
  font-weight: 500;
}

.publish-panel input:not(.ghost-date-input),
.publish-panel select {
  width: 100%;
  margin-top: .25rem;
  padding: .5rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--bg);
  color: var(--text);
  font-family: inherit;
  box-sizing: border-box; 
}

.publish-panel input:focus,
.publish-panel select:focus {
  outline: 2px solid var(--accent);
  border-color: var(--accent);
}

.custom-date-wrapper {
  position: relative;
  width: 100%;
  margin-top: .25rem;
  cursor: pointer;
}

.fake-input {
  width: 100%;
  padding: .5rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 20%, transparent);
  background: var(--bg);
  color: var(--muted, #888); 
  font-family: inherit;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  min-height: 38px; 
}

.fake-input.has-value {
  color: var(--text);
}

.ghost-date-input {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  z-index: 10;
  pointer-events: none;
}

.calendar-icon {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-size: 1rem;
  opacity: 0.6;
}

.publish-panel .dialog-actions {
  display: flex;
  gap: .6rem;
  justify-content: flex-end;
  margin-top: .9rem;
}

.publish-panel .dialog-close {
  position: absolute;
  top: .5rem;
  right: .5rem;
  font-size: 1.4rem;
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  border-radius: 8px;
}

.publish-panel .dialog-close:hover {
  color: var(--text);
}

@media (max-width: 520px) {
  .publish-panel { width: calc(100% - 1.4rem); padding: .9rem; }
  .publish-panel .dialog-actions { flex-direction: column-reverse; }
  .publish-panel .dialog-actions .btn { width: 100%; }
}
</style>

==================================================

FILE: frontend\src\components\ReportCard.vue
--------------------
<template>
  <article class="report-card">
    <div class="report-content">

      <div class="report-header">
        <h3 class="title">Segnalazione</h3>
        <span class="status" :class="report.status">
          {{ report.status }}
        </span>
      </div>

      <div class="report-body">
        <div class="info-row">
          <span class="label">Motivo:</span>
          <p class="text">{{ report.reason }}</p>
        </div>

        <div class="info-row" v-if="report.comment">
          <span class="label">Dettagli:</span>
          <p class="text">{{ report.comment }}</p>
        </div>
      </div>

      <div class="report-footer">
        
        <div class="users-container">
          <div class="user-row">
            <span class="role-icon" title="Segnalatore">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg>
            </span>
            <RouterLink :to="`/profile/${report.reporter}`" class="user-link">
              {{ report.reporter }}
            </RouterLink>
          </div>

          <div class="user-row">
            <span class="role-icon alert" title="Segnalato">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-3-3.87"></path><path d="M4 21v-2a4 4 0 0 1 3-3.87"></path><circle cx="12" cy="7" r="4"></circle></svg>
            </span>
            <RouterLink :to="`/profile/${report.reported}`" class="user-link">
              {{ report.reported }}
            </RouterLink>
          </div>
        </div>

        <div class="actions">
          <button class="btn-ghost delete-btn" @click="$emit('delete-report', report)">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
            Elimina
          </button>
        </div>
      </div>

    </div>
  </article>
</template>

<script setup>
import { RouterLink } from "vue-router";

defineProps({
  report: { type: Object, required: true }
});

defineEmits(["delete-report"]);
</script>

<style scoped>
.report-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  padding: 1rem;
  display: flex;
  flex-direction: column;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  border: 1px solid transparent;
  height: 100%; 
}

.report-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.report-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  height: 100%;
}

.report-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  padding-bottom: 0.6rem;
}

.title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text);
}

.status {
  padding: 0.2rem 0.6rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: capitalize;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.status.pending { background: #fff7ed; color: #c2410c; }
.status.approved { background: #f0fdf4; color: #15803d; }
.status.rejected { background: #fef2f2; color: #b91c1c; }

@media (prefers-color-scheme: dark) {
  .status.pending { background: rgba(194, 65, 12, 0.2); color: #fdba74; }
  .status.approved { background: rgba(21, 128, 61, 0.2); color: #86efac; }
  .status.rejected { background: rgba(185, 28, 28, 0.2); color: #fca5a5; }
}

.report-body {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  flex-grow: 1;
}

.info-row {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.label {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--muted);
  font-weight: 700;
}

.text {
  margin: 0;
  color: var(--text);
  font-size: 0.95rem;
  line-height: 1.4;
  word-wrap: break-word; 
}

.report-footer {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: auto;
  padding-top: 0.5rem;
}

.users-container {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  background: color-mix(in srgb, var(--text) 5%, transparent);
  padding: 0.75rem;
  border-radius: 8px;
}

.user-row {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  overflow: hidden; 
}

.role-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  min-width: 16px; 
}

.role-icon.alert {
  color: #ef4444;
}

.user-link {
  text-decoration: none;
  color: var(--text);
  font-size: 0.85rem;
  font-weight: 500;
  transition: color 0.2s;
  
  white-space: normal; 
  overflow-wrap: anywhere; 
  word-break: break-word;
  line-height: 1.2;
}

.user-link:hover {
  color: var(--accent);
  text-decoration: underline;
}

.actions {
  display: flex;
  width: 100%;
}

.btn-ghost {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  width: 100%; 
  padding: 0.5rem;
  font-size: 0.9rem;
  border-radius: var(--radius);
  cursor: pointer;
  border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
  background: transparent;
  color: var(--muted);
  font-weight: 500;
  transition: all 0.2s ease;
}

.btn-ghost:hover {
  background: color-mix(in srgb, var(--text) 5%, transparent);
  color: var(--text);
}

.btn-ghost.delete-btn:hover {
  background: #fef2f2;
  color: #ef4444;
  border-color: #fca5a5;
}

@media (prefers-color-scheme: dark) {
  .btn-ghost.delete-btn:hover { 
    background: rgba(239, 68, 68, 0.2); 
    color: #fca5a5;
    border-color: rgba(239, 68, 68, 0.3);
  }
}

@media (min-width: 600px) {
  .actions {
    width: auto;
    align-self: flex-end; 
  }
  
  .btn-ghost {
    width: auto; 
    padding: 0.35rem 0.8rem;
    font-size: 0.85rem;
  }

  .report-footer {
     gap: 0.75rem;
  }
}
</style>

==================================================

FILE: frontend\src\components\ReviewCard.vue
--------------------
<template>
  <article class="review-card" :data-id="review.id">
    <div class="review-content">
      <div class="review-header">
        <div class="review-info">
           <span class="stars">{{ '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating) }}</span> 
          <span class="date">{{ review.comment }}</span>
        </div>
      </div>
      <div class="review-footer">
        <div class="review-author">{{ review.student }}</div>
        <div class="card-actions">
          <RouterLink :to="`/profile/${review.student}`" class="small btn-ghost" aria-label="Vedi profilo">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 viewBox="0 0 24 24">
              <path d="M20 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M4 21v-2a4 4 0 0 1 3-3.87"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </RouterLink>
        </div>
      </div>
    </div>
  </article>
</template>

<script setup>
import { RouterLink } from 'vue-router';

const props = defineProps({
  review: Object
})
</script>

<style scoped>
.review-card {
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  padding: 0.85rem 1rem;
  transition: transform .2s ease, box-shadow .2s ease;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.6rem;
  min-height: 110px;
}

.review-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.review-card.removing {
  opacity: 0;
  transform: translateY(-6px) scale(.995);
  transition: opacity .18s ease, transform .18s ease;
}

.review-content {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0.6rem;
  height: 100%;
}

.review-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 0.25rem;
}

.review-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-top: 0.2rem;
}

.review-line {
  display: grid;
  grid-template-columns: 2fr 1fr auto;
  align-items: center;
  gap: .75rem;
}

.review-title {
  font-weight: 600;
  font-size: 0.95rem;
  margin: 0;
}

.review-info {
  display: flex;
  gap: 0.5rem;
  color: var(--muted);
  font-size: 0.85rem;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.review-author {
  font-weight: 500;
  color: var(--muted);
  font-size: 0.85rem;
}

.card-actions {
  display: flex;
  gap: .4rem;
}

.small {
  font-size: .85rem;
  padding: .3rem .6rem;
}

.card-actions svg {
  width: 18px;
  height: 18px;
}

.btn-ghost svg {
  transition: transform 0.2s ease, color 0.2s ease;
}

.btn-ghost:hover svg {
  transform: scale(1.1);
  color: var(--accent);
}

@media (max-width: 600px) {
  .lesson-header, .lesson-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.4rem;
  }
  .lesson-info {
    justify-content: flex-start;
  }
  .card-actions {
    width: 100%;
    justify-content: flex-end;
  }
}

@media (min-width: 880px) {
  .lesson-line {
    grid-template-columns: 1fr auto;
    gap: .5rem;
  }
}

html[data-theme='light'] button:disabled {
  background-color: #d1fae5; 
  color: #15803d;           
  border: 1px solid #15803d;
  opacity: 0.6;
  cursor: not-allowed;
}

html[data-theme='dark'] button:disabled {
  background-color: #1e3a2f; 
  color: #4ade80;            
  border: 1px solid #4ade80;
  opacity: 0.6;
  cursor: not-allowed;
}
</style>

==================================================

FILE: frontend\src\components\SidebarFilters.vue
--------------------
<template>
  <div 
    class="sidebar-backdrop" 
    v-if="isOpen" 
    @click="isOpen = false"
  ></div>

  <aside 
    class="sidebar" 
    :class="{ open: isOpen }" 
    role="complementary" 
    aria-labelledby="sidebarTitle"
  >
    <button 
      class="sidebar-tab" 
      @click="isOpen = !isOpen"
      aria-label="Toggle filters"
    >
      <span class="arrow-icon">{{ isOpen ? '‹' : '›' }}</span>
    </button>

    <div class="sidebar-content">
      <div class="sidebar-header">
        <h2 id="sidebarTitle">Filtra risultati</h2>
        <button class="close-btn-mobile" @click="isOpen = false">✖</button>
      </div>
      
      <div class="controls">
        
        <div class="control-group">
          <label for="course">Materia</label>
          <input list="courses" id="course" placeholder="Seleziona il corso di interesse" v-model="filters.course" />
          <datalist id="courses">
            <option v-for="matter in matters" :key="matter" :value="matter">{{ matter }}</option>
          </datalist>
        </div>

        <div class="control-group" v-if="props.mode == 'null'">
          <label for="author">Insegnante</label>
          <input type="text" id="author" placeholder="Email docente" v-model="filters.author" />
        </div>

        <div class="control-group">
          <label>Data</label>
          
          <div class="custom-date-wrapper" @click="openCalendar">
            
            <div class="fake-input" :class="{ 'has-value': filters.date }">
              {{ formattedDateLabel }}
            </div>

            <input 
              ref="dateInputRef"
              type="date" 
              v-model="filters.date"
              class="ghost-date-input"
              @click.stop
            />
            
            <span v-if="!filters.date" class="calendar-icon">📅</span>

            <button
              v-if="filters.date"
              type="button"
              class="reset-date"
              @click.stop="filters.date = null"
            >
              ✖
            </button>
          </div>
        </div>

        <div class="control-group">
          <label>Prezzo (€)</label>
          <div style="display:flex; gap:.5rem">
            <input class="minmax" type="number" min="0" placeholder="min" v-model.number="filters.minPrice" />
            <input class="minmax" type="number" min="0" placeholder="max" v-model.number="filters.maxPrice" />
          </div>
        </div>

      </div>
    </div>
  </aside>
</template>

<script setup>
import { reactive, watch, ref, computed } from 'vue'
import { matters } from '../composables/auth'

const props = defineProps({
  mode: { type: String, default: "null" }
})

const emit = defineEmits(['update:filters'])
const isOpen = ref(false)
const dateInputRef = ref(null) 

const filters = reactive({
  course: '',
  author: '',
  date: null,
  minPrice: '',
  maxPrice: ''
})

const formattedDateLabel = computed(() => {
  if (!filters.date) return 'Seleziona data';
  try {
    const [year, month, day] = filters.date.split('-');
    return `${day}/${month}/${year}`;
  } catch (e) {
    return filters.date;
  }
})

function openCalendar() {
  if (dateInputRef.value) {
    if (typeof dateInputRef.value.showPicker === 'function') {
      dateInputRef.value.showPicker();
    } else {
      dateInputRef.value.focus();
    }
  }
}

watch(filters, () => {
  emit('update:filters', { ...filters })
}, { deep: true })
</script>

<style scoped>
.sidebar {
  background: var(--card);
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  z-index: 1000;
}

.sidebar-content {
  padding: 1rem;
  height: 100%;
  overflow-y: auto;
}

.sidebar h2 {
  font-size: 1.1rem;
  margin: 0;
  color: var(--text);
}

.sidebar-header {
  display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.2rem;
}

.controls { display: flex; flex-direction: column; gap: 1rem; }
.control-group { display: flex; flex-direction: column; gap: .3rem; }

input:not(.ghost-date-input), select {
  padding: .6rem .7rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 15%, transparent);
  background: var(--bg);
  color: var(--text);
  width: 100%;
  box-sizing: border-box;
}

input:focus { border-color: var(--accent); outline: none; }
.minmax { width: 50%; }

.custom-date-wrapper {
  position: relative;
  width: 100%;
  height: 42px;
  cursor: pointer; 
}

.fake-input {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  padding: 0 .7rem;
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--text) 15%, transparent);
  background: var(--bg);
  color: var(--muted, #888);
  font-size: 13.33px;
  box-sizing: border-box;
  pointer-events: none;
}

.fake-input.has-value {
  color: var(--text);
}

.ghost-date-input {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  opacity: 0; 
  z-index: 10;
  pointer-events: none; 
}

.calendar-icon {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-size: 1rem;
  opacity: 0.6;
}

.reset-date {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text);
  font-weight: bold;
  z-index: 20;
  padding: 5px;
}

@media (min-width: 880px) {
  .sidebar {
    width: var(--sidebar-w);
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
    position: sticky; top: 5.5rem; align-self: start;
    transform: none !important;
  }
  .sidebar-tab, .sidebar-backdrop, .close-btn-mobile { display: none !important; }
}

@media (max-width: 879px) {
  .sidebar-backdrop {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(2px);
    z-index: 999; animation: fadeIn 0.3s ease;
  }

  .sidebar {
    position: fixed; top: 0; left: 0; bottom: 0;
    width: 85%; max-width: 320px;
    box-shadow: 2px 0 15px rgba(0,0,0,0.2);
    transform: translateX(-100%);
    border-radius: 0;
  }
  .sidebar.open { transform: translateX(0); }

  .sidebar-tab {
    position: absolute; top: 50%; transform: translateY(-50%);
    width: 28px; height: 40px; right: -28px;
    background: var(--card);
    border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
    border-left: none; border-radius: 0 8px 8px 0;
    box-shadow: 4px 1px 6px rgba(0,0,0,0.08);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; color: var(--accent); font-size: 1.2rem;
    padding-left: 2px; z-index: 1001;
  }
  
  .arrow-icon { line-height: 1; }
  .close-btn-mobile { background: none; border: none; font-size: 1.2rem; color: var(--text); padding: .5rem; cursor: pointer; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
}
</style>

==================================================

FILE: frontend\src\components\ToastNotification.vue
--------------------
<template>
  <div class="toast show" role="status" aria-live="polite">
    <span>{{ message }}</span>
    <button id="toastClose" aria-label="Chiudi notifica" @click="$emit('close')">✖</button>
  </div>
</template>

<script setup>
defineProps({ message: String })
</script>


==================================================

FILE: frontend\src\composables\auth.js
--------------------
import { ref } from 'vue'

export const isLoggedIn = ref(false)
export const isAdmin = ref(false)
export const user = ref(null)


export function login(userdata) { 
  isLoggedIn.value = true 
  user.value = userdata
}
export function logout() { 
  isLoggedIn.value = false
  isAdmin.value = false
  user.value = null
}

export function getCurrentUser() {
  return user;
}

export const matters = ref([]);

export function setMatter(newMatters) {
  matters.value = newMatters;
}

export function getMatters() {
  return matters.value;
}

export function toBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => resolve(reader.result);
    reader.onerror = error => reject(error);
  });
}

==================================================

FILE: frontend\src\composables\useDarkMode.js
--------------------
import { ref, watchEffect } from 'vue'

const theme = ref(localStorage.getItem('st-theme') || 'light')

export default function useDarkMode() {
  const toggleTheme = () => {
    theme.value = theme.value === 'dark' ? 'light' : 'dark'
  }

  watchEffect(() => {
    document.documentElement.setAttribute('data-theme', theme.value)
    localStorage.setItem('st-theme', theme.value)
  })

  return { theme, toggleTheme }
}


==================================================

FILE: frontend\src\plugins\socket.js
--------------------
import { io } from "socket.io-client";

const socket = io("http://localhost:4000", {
  transports: ["websocket"],
});

export default {
  install: (app) => {
    app.config.globalProperties.$socket = socket;
    app.provide("socket", socket);
  },
};

export { socket };


==================================================

FILE: frontend\src\routes\router.js
--------------------
import { createRouter, createWebHashHistory } from 'vue-router'
import HomeView from '@/views/HomeView.vue'
import RegisterView from '@/views/RegisterView.vue'
import LoginView from '@/views/LoginView.vue'
import ProfileView from '@/views/ProfileView.vue'
import BookedView from '@/views/BookedView.vue'
import OfferedView from '@/views/OfferedView.vue'
import { getCurrentUser } from '@/composables/auth.js'
import ReporterView from '@/views/ReporterView.vue'

const routes = [
  { path: '/', name: 'home', component: HomeView, meta: { showFilters: true } },
  { path: '/register', name: 'register', component: RegisterView },
  { path: '/login', name: 'login', component: LoginView },
  {
    path: '/profile',
    redirect: () => {

      const { currentUser } = getCurrentUser()
      return currentUser.value
        ? `/profile/${currentUser.value?.email}`
        : '/login'
    }
  },
  { path: '/profile/:email', name: 'profile', component: ProfileView },
  { path: '/booked', name: 'booked', component: BookedView, meta: { showFilters: true } },
  { path: '/offered/:email', name: 'offered', component: OfferedView, meta: { showFilters: true } },
  { path: '/reports', name: 'reports', component: ReporterView },

]

const router = createRouter({
  history: createWebHashHistory(),
  routes
})

export default router

==================================================

FILE: frontend\src\views\BookedView.vue
--------------------
<template>
  <SidebarFilters mode="private" @update:filters="handleFiltersUpdate" />
  <main class="content" role="main" aria-labelledby="mainTitle">
    <div class="content-header">
      <h2 id="mainTitle">Lezioni prenotate</h2>
    </div>

    <section class="results" id="lessonsList">
      <template v-if="filteredLessons.length > 0">
        <LessonCard
          v-for="lesson in filteredLessons"
          :key="lesson._id"
          :lesson="lesson"
          mode="booked"
        />
      </template>
      <div v-else class="empty-state" role="status" aria-live="polite">
        <div class="empty-icon">📚</div>
        <h3 class="empty-title">Nessuna lezione prenotata</h3>
        <p class="empty-text">
          {{ isLoggedIn ? 'Prenota una lezione!' : 'Effettua l’accesso per prenotare la tua prima lezione.' }}
        </p>
        <RouterLink to="/" class="menu-item">Vedi le lezioni disponibili</RouterLink>      
      </div>
    </section>
    <FooterNote />
  </main>

</template>

<script setup>
import { ref, computed } from 'vue'
import LessonCard from '@/components/LessonCard.vue'
import FooterNote from '@/components/FooterNote.vue'
import { isLoggedIn } from '@/composables/auth.js'
import { socket } from "@/plugins/socket";
import { onMounted } from "vue";
import { getCurrentUser } from '../composables/auth';
import SidebarFilters from '@/components/SidebarFilters.vue'


function bookedLessons(email) {
  return new Promise((resolve, reject) => {
    socket.emit("lesson:myBooked", email, (response) => {
      if (!response.success) {
        reject(response.error);
      } else {
        resolve(response.data);
      }
    });
  });
}


const myBookedLessons = ref([]); 

const filters = ref({
  course: '',
  author: '',
  date: null,
  minPrice: '',
  maxPrice: ''
})

function handleFiltersUpdate(newFilters) {
  filters.value = newFilters  
}

const filteredLessons = computed(() => {
  return myBookedLessons.value.filter(lesson => {

    if (filters.value.course &&
        !lesson.subject.toLowerCase().includes(filters.value.course.toLowerCase())) {
      return false
    }

    if (filters.value.date) {
      const lessonDate = lesson.date.slice(0, 10)     
      const filterDate = filters.value.date.slice(0, 10)

      if (lessonDate !== filterDate) {
        return false
      }
    }

    if (filters.value.minPrice !== '' &&
        lesson.price < filters.value.minPrice) {
      return false
    }

    if (filters.value.maxPrice !== '' &&
        lesson.price > filters.value.maxPrice) {
      return false
    }

    return true
  })
})


onMounted(() => {
  bookedLessons(getCurrentUser().value.email)
    .then(lessons => {
      myBookedLessons.value = lessons;
    })
    .catch(err => {
      console.error("Errore nel recuperare le lezioni:", err);
    });
});


</script>

<style scoped>
main.content {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  width: 100%;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card);
  padding: .75rem 1rem;
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 4rem;
  z-index: 900;
  flex-wrap: wrap;
}

.filters-row {
  display: flex;
  gap: .5rem;
  align-items: center;
  flex-wrap: wrap;
}

.results {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding: 0 1rem 1rem;
}


@media (min-width: 880px) {
  .results {
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  }

}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .75rem;
  text-align: center;
  background: var(--card);
  border-radius: var(--radius);
  padding: 2rem 1rem;
  box-shadow: var(--shadow-sm);
  min-height: 280px;
  color: var(--text);
  opacity: .9;
 
}

.empty-icon {
  font-size: 2.2rem;
}

.empty-title {
  font-size: 1.15rem;
  font-weight: 600;
  margin: 0;
}

.empty-text {
  color: var(--muted);
  font-size: .95rem;
  max-width: 320px;
}

.empty-state .btn {
  margin-top: .5rem;
}



</style>



==================================================

FILE: frontend\src\views\HomeView.vue
--------------------
<template>
  <SidebarFilters @update:filters="handleFiltersUpdate" />
  <main class="content" role="main" aria-labelledby="mainTitle">
    <div class="content-header">
      <h2 id="mainTitle">Lezioni disponibili</h2>
    </div>

    <section class="results" id="lessonsList">
      <LessonCard
        v-for="lesson in filteredLessons"
        mode="available"
        :key="lesson.id"
        :lesson="lesson"
        @book="handleBook(lesson)"
        v-if="filteredLessons.length > 0"
      />
      <div v-else class="empty-state" role="status" aria-live="polite">
        <div class="empty-icon">📚</div>
        <h3 class="empty-title">Nessuna lezione disponibile</h3>
        <p class="empty-text">
          {{ isLoggedIn ? 'Pubblica tu una lezione o controlla più tardi!' : 'Effettua l’accesso per pubblicare la tua prima lezione.' }}
        </p>
        <button
          v-if="isLoggedIn"
          class="btn btn-primary"
          @click="$emit('publish-request')"
        >
          Pubblica una lezione
        </button>
      </div>
    </section>
    <FooterNote />
  </main>

</template>

<script setup>
import { ref, computed } from 'vue'
import LessonCard from '@/components/LessonCard.vue'
import FooterNote from '@/components/FooterNote.vue'
import { isLoggedIn, getCurrentUser } from '@/composables/auth.js'
import { inject, onMounted, onUnmounted } from "vue";
import SidebarFilters from '@/components/SidebarFilters.vue'

const socket = inject("socket");
const availableLessons = ref([]);

const filters = ref({
  course: '',
  author: '',
  date: null,
  minPrice: '',
  maxPrice: ''
})

function handleFiltersUpdate(newFilters) {
  filters.value = newFilters  
}

const filteredLessons = computed(() => {
  return availableLessons.value.filter(lesson => {

    if (filters.value.course &&
        !lesson.subject.toLowerCase().includes(filters.value.course.toLowerCase())) {
      return false
    }

    if (filters.value.author &&
        !lesson.teacher.toLowerCase().includes(filters.value.author.toLowerCase())) {
      return false
    }

    if (filters.value.date) {
      const lessonDate = lesson.date.slice(0, 10)      
      const filterDate = filters.value.date.slice(0, 10)

      if (lessonDate !== filterDate) {
        return false
      }
    }

    if (filters.value.minPrice !== '' &&
        lesson.price < filters.value.minPrice) {
      return false
    }

    if (filters.value.maxPrice !== '' &&
        lesson.price > filters.value.maxPrice) {
      return false
    }

    return true
  })
})


onMounted(() => {

  socket.emit("lessons:getAvailable");

  socket.on("lessons:available", (lessons) => {
    if(isLoggedIn.value){
      const currentUserEmail = getCurrentUser().value.email;
      availableLessons.value = lessons.filter(lesson => lesson.teacher !== currentUserEmail);
    }else{
      availableLessons.value = lessons;
    }
  });

  socket.on("lessons:updated", () => {
    socket.emit("lessons:getAvailable"); 
  });
});

onUnmounted(() => {
  socket.off("lessons:available");
  socket.off("lessons:updated");
});



const emit = defineEmits(['book'])

function handleBook(lesson) {
  emit('book', lesson)
}



</script>

<style scoped>
main.content {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  width: 100%;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card);
  padding: .75rem 1rem;
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 4rem;
  z-index: 900;
  flex-wrap: wrap;
}

.filters-row {
  display: flex;
  gap: .5rem;
  align-items: center;
  flex-wrap: wrap;
}

.results {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding: 0 1rem 1rem;
}


@media (min-width: 880px) {
  .results {
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  }

}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .75rem;
  text-align: center;
  background: var(--card);
  border-radius: var(--radius);
  padding: 2rem 1rem;
  box-shadow: var(--shadow-sm);
  min-height: 280px;
  color: var(--text);
  opacity: .9;
 
}

.empty-icon {
  font-size: 2.2rem;
}

.empty-title {
  font-size: 1.15rem;
  font-weight: 600;
  margin: 0;
}

.empty-text {
  color: var(--muted);
  font-size: .95rem;
  max-width: 320px;
}

.empty-state .btn {
  margin-top: .5rem;
}



</style>



==================================================

FILE: frontend\src\views\LoginView.vue
--------------------
<template>
  <div class="app" role="application" aria-label="Piattaforma prenotazioni ripetizioni">
    <AppHeader @toggle-theme="toggleTheme" />

    <main class="access-container" role="main" aria-labelledby="loginTitle">
      <section class="access-card">
        <h2 id="loginTitle">Accedi al tuo account</h2>

        <form @submit.prevent="handleSubmit" novalidate>
          <div class="form-group">
            <label for="email">Email istituzionale *</label>
            <input
              v-model.trim="form.email"
              type="email"
              id="email"
              placeholder="nome.cognome@studio.unibo.it"
              required
              :class="{ error: errors.email }"
            />
          </div>

          <div class="form-group password-group">
            <label for="password">Password *</label>
            <div class="password-wrapper">
              <input
                :type="showPassword ? 'text' : 'password'"
                v-model="form.password"
                id="password"
                minlength="6"
                required
                :class="{ error: errors.password }"
              />
              <button type="button" class="password-toggle" @click="togglePassword" aria-label="Mostra password">
                <svg v-if="!showPassword" class="icon eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
                <svg v-else class="icon eye-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M17.94 17.94A10.1 10.1 0 0 1 12 20c-7 0-11-8-11-8a18.5 18.5 0 0 1 5.06-5.06"/>
                  <path d="M1 1l22 22"/>
                  <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/>
                </svg>
              </button>
            </div>
          </div>

          <button type="submit" class="btn-primary-large">Accedi</button>

          <p class="secondary-text">
            Non hai ancora un account?
            <RouterLink to="/register">Iscriviti</RouterLink>
          </p>
        </form>
      </section>
    </main>

    <ToastNotification v-if="toast.visible" :message="toast.message" @close="toast.visible = false" />
  </div>
</template>

<script setup>
import { ref, reactive, nextTick } from 'vue'
import { useRouter } from 'vue-router'
import AppHeader from '@/components/AppHeader.vue'
import ToastNotification from '@/components/ToastNotification.vue'
import useDarkMode from '@/composables/useDarkMode.js'
import '@/assets/styles/access-page.css'

import { login, getCurrentUser, isAdmin } from '@/composables/auth.js'
import { inject } from "vue";
const socket = inject("socket");

const { toggleTheme } = useDarkMode()
const router = useRouter()

const form = reactive({
  email: '',
  password: ''
})

const showPassword = ref(false)
function togglePassword() {
  showPassword.value = !showPassword.value
}

const toast = reactive({ visible: false, message: '' })
let toastTimeout
function showToast(message) {
  toast.message = message
  toast.visible = true
  clearTimeout(toastTimeout)
  toastTimeout = setTimeout(() => (toast.visible = false), 3000)
}

const errors = reactive({ email: false, password: false })

function showFieldError(field) {
  errors[field] = true
  nextTick(() => {
    const inputEl = document.getElementById(field)
    if (!inputEl) return
    inputEl.classList.add('shake')
    inputEl.addEventListener('animationend', () => inputEl.classList.remove('shake'), { once: true })
    inputEl.addEventListener('input', () => (errors[field] = false), { once: true })
  })
}

function handleSubmit() {
  errors.email = false
  errors.password = false

  const emailValid = form.email.endsWith('@studio.unibo.it')
  const passwordValid = /^(?=.*[0-9]).{6,}$/.test(form.password)

  if (!passwordValid) {
    showFieldError('password')
    showToast('❌ La password deve avere almeno 6 caratteri e includere un numero')
  }

  if (!emailValid) {
    showFieldError('email')
    showToast('❌ Usa la tua email istituzionale @studio.unibo.it')
  }

  if (!emailValid || !passwordValid) return

  socket.emit("session:login", { email: form.email, password: form.password }, (res) => {
      if (!res.success) {
        showToast("❌ Email istituzionale o password errati")
        return
      }

      login(res.data) 
      socket.emit("admin:check", form.email, (adminRes) => {
        if (adminRes.success) {
          isAdmin.value = true
        } else {
          console.error("Errore nel controllo admin:", adminRes.error)
        }
      })
      
      showToast("✅ Accesso completato con successo!")

      setTimeout(() => router.push("/"), 500)
    })
}
</script>


==================================================

FILE: frontend\src\views\OfferedView.vue
--------------------
<template>
  <SidebarFilters mode="private" @update:filters="handleFiltersUpdate" />

  <main class="content" role="main" aria-labelledby="mainTitle">
    <div class="content-header">
      <h2 id="mainTitle">{{ pageTitle }}</h2>
    </div>

    <section class="results" id="lessonsList">
      <template v-if="filteredLessons.length > 0">
        <LessonCard
          v-for="lesson in filteredLessons"
          :key="lesson._id"
          :lesson="lesson"
          :mode="isOwner ? 'offered' : 'available'"
          @book="(lesson) => { console.log('book ricevuto', lesson); handleBook(lesson) }"
          @edit="(lesson) => { console.log('edit ricevuto', lesson); handleEdit(lesson) }"
        />
      </template>

      <div v-else class="empty-state" role="status" aria-live="polite">
        <div class="empty-icon">📚</div>
        <h3 class="empty-title">{{ emptyTitle }}</h3>
        <p class="empty-text">{{ emptyText }}</p>

        <button
          v-if="isOwner"
          class="btn btn-primary"
          @click="$emit('publish-request')"
        >
          Pubblica una lezione
        </button>
      </div>
    </section>

    <FooterNote />
  </main>
</template>

<script setup>
import { ref, computed, watch } from 'vue';
import { useRoute } from 'vue-router';
import LessonCard from '@/components/LessonCard.vue';
import FooterNote from '@/components/FooterNote.vue';
import { getCurrentUser } from '@/composables/auth';
import { inject, onMounted, onUnmounted } from "vue";
import { isLoggedIn } from '../composables/auth';
import SidebarFilters from '@/components/SidebarFilters.vue'


const socket = inject("socket");
const route = useRoute();

const emit = defineEmits(['book', 'edit']);

const myOfferedLessons = ref([]);

const filters = ref({
  course: '',
  author: '',
  date: null,
  minPrice: '',
  maxPrice: ''
})

function handleFiltersUpdate(newFilters) {
  filters.value = newFilters  
}

const filteredLessons = computed(() => {
  return myOfferedLessons.value.filter(lesson => {

    if (filters.value.course &&
        !lesson.subject.toLowerCase().includes(filters.value.course.toLowerCase())) {
      return false
    }

    if (filters.value.date) {
      const lessonDate = lesson.date.slice(0, 10)      
      const filterDate = filters.value.date.slice(0, 10)

      if (lessonDate !== filterDate) {
        return false
      }
    }

    if (filters.value.minPrice !== '' &&
        lesson.price < filters.value.minPrice) {
      return false
    }

    if (filters.value.maxPrice !== '' &&
        lesson.price > filters.value.maxPrice) {
      return false
    }

    return true
  })
})



const routeEmail = computed(() => route.params.email || getCurrentUser().value?.email);

const isOwner = computed(() => {
  return routeEmail.value === getCurrentUser().value?.email;
});


const pageTitle = computed(() =>
  isOwner.value ? "Lezioni offerte da te" : `Lezioni offerte da ${routeEmail.value}`
);

const emptyTitle = computed(() =>
  isOwner.value ? "Non hai ancora pubblicato lezioni" : "Nessuna lezione offerta da questo utente"
);

const emptyText = computed(() =>
  isOwner.value ? "Pubblica la tua prima lezione!" : "Questo utente non ha lezioni disponibili."
);


function fetchOfferedLessons(email) {
  return new Promise((resolve, reject) => {
    socket.emit("lesson:myOffered", email, (response) => {
      if (!response.success) reject(response.error);
      else resolve(response.data);
    });
  });
}


onMounted(() => {
  loadLessons();
  socket.on("lessons:updated", () => {
    loadLessons();
  });
});


watch(
  () => route.params.email,
  () => {
    loadLessons();
  }
);

function loadLessons() {
  const email = routeEmail.value;

  fetchOfferedLessons(email)
    .then(data => {
      if(isOwner.value){
        myOfferedLessons.value = data;
      }else{
        const lessons = data.filter(lesson => lesson.status === 'available');
        myOfferedLessons.value = lessons;
      }
    })
    .catch(err => {
      console.error("Errore nel recuperare le lezioni offerte:", err);
    });
}

function handleBook(lesson) {
  emit('book', lesson)
}

function handleEdit(lesson) {
  emit('edit', lesson)
}
</script>


<style scoped>
main.content {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  width: 100%;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card);
  padding: .75rem 1rem;
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 4rem;
  z-index: 900;
  flex-wrap: wrap;
}

.filters-row {
  display: flex;
  gap: .5rem;
  align-items: center;
  flex-wrap: wrap;
}

.results {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding: 0 1rem 1rem;
}


@media (min-width: 880px) {
  .results {
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  }

}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .75rem;
  text-align: center;
  background: var(--card);
  border-radius: var(--radius);
  padding: 2rem 1rem;
  box-shadow: var(--shadow-sm);
  min-height: 280px;
  color: var(--text);
  opacity: .9;
 
}

.empty-icon {
  font-size: 2.2rem;
}

.empty-title {
  font-size: 1.15rem;
  font-weight: 600;
  margin: 0;
}

.empty-text {
  color: var(--muted);
  font-size: .95rem;
  max-width: 320px;
}

.empty-state .btn {
  margin-top: .5rem;
}



</style>



==================================================

FILE: frontend\src\views\ProfileView.vue
--------------------
<template>
  <main class="profile-container" role="main" aria-labelledby="profileTitle">

    <div class="profile-wrapper">
      <PersonalProfile
        v-if="isMe && profileUser"
        :user="profileUser"
      />
      <PublicProfile
        v-else-if="profileUser"
        :user="profileUser"
        :isLogged="isLogged.value"
        @show-toast="$emit('show-toast', $event)"
      />
      <p v-else class="loading">⏳ Caricamento profilo...</p>

      <section class="reviews-section" id="reviewsList">
        <h3 class="reviews-title" v-if="reviews?.length > 0">Recensioni</h3>

        <ReviewCard
          v-for="review in reviews"
          :key="review?._id"
          :review="review"
          v-if="reviews?.length > 0"
        />

        <p v-else class="no-reviews">Nessuna recensione presente.</p>
      </section>
    </div>

  </main>
</template>


<script setup>
import { ref } from 'vue'
import PersonalProfile from '@/components/PersonalProfile.vue'
import PublicProfile from '@/components/PublicProfile.vue'
import ReviewCard from '@/components/ReviewCard.vue'
import { watch } from "vue"
import { socket } from "@/plugins/socket";
import { getCurrentUser, isLoggedIn } from '@/composables/auth';
import { computed } from 'vue'
import { useRoute } from 'vue-router'
import { inject, onMounted, onUnmounted } from "vue";

function userByEmail(email) {
  return new Promise((resolve, reject) => {
    socket.emit("user:getByEmail", { email }, (response) => {
      if (!response.success) {
        reject(response.error);
      } else {
        resolve(response.data);
      }
    });
  });
}

function reviewByUserEmail(email) {
  return new Promise((resolve, reject) => {
    socket.emit("review:getByUserEmail", email, (response) => {
      if (!response.success) {
        reject(response.error);
      } else {
        resolve(response.data);
      }
    });
  });
}

const route = useRoute()

const profileEmail = ref(route.params.email)

const profileUser = ref(null)

userByEmail(profileEmail.value)
  .then(user => {
    profileUser.value = user;
  })
  .catch(err => {
    console.error("Errore:", err);
  });

const reviews = ref([])

reviewByUserEmail(profileEmail.value)
  .then(userReviews => {
    reviews.value = userReviews;
    profileUser.value.numReviews = userReviews.length;
    profileUser.value.avgRating = userReviews.reduce((sum, r) => sum + r.rating, 0) / (userReviews.length || 1);
  })
  .catch(err => {
    console.error("Errore reviews:", err);
    reviews.value = [];
  });

const isMe = computed(() => {
  return isLoggedIn.value && getCurrentUser().value?.email === profileEmail.value
})

onMounted(() => {
  socket.on("review:updated", () => {
    reviewByUserEmail(profileEmail.value) 
      .then(userReviews => {
      reviews.value = userReviews;
      profileUser.value.numReviews = userReviews.length;
      profileUser.value.avgRating = userReviews.reduce((sum, r) => sum + r.rating, 0) / (userReviews.length || 1);
    })
    .catch(err => {
      console.error("Errore reviews:", err);
      reviews.value = [];
    });
  });
});

const isLogged = ref(isLoggedIn.value)

const emit = defineEmits(['edit-profile', 'show-toast']);

watch(
  () => route.params.email,
  async (newEmail) => {
    profileEmail.value = newEmail
    try {
      profileUser.value = await userByEmail(newEmail).then(user => {
        return user;
      })
      reviews.value = await reviewByUserEmail(newEmail).then(userReviews => {
          return userReviews;
        })
        .catch(err => {
          console.error("Errore reviews:", err);
          return [];
        }); 
      isLogged.value = isLoggedIn.value
    } catch (err) {
      console.error("Errore caricando il profilo:", err);
    }
  }
);

</script>

<style scoped>

.profile-container {
  display: flex;
  justify-content: center;
  padding: 1.2rem 0.8rem;
}

.profile-wrapper {
  width: 100%;
  max-width: 900px;
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.loading {
  text-align: center;
  color: var(--muted);
  font-size: 1rem;
}

.reviews-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  background: var(--card);
  border-radius: var(--radius);
  padding: 1.2rem;
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-sm);
}

.reviews-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--text);
}

.no-reviews {
  color: var(--muted);
  text-align: center;
  padding: 1rem 0;
}

@media (min-width: 700px) {
  .profile-container {
    padding: 2rem 1.5rem;
  }

  .reviews-section {
    padding: 1.5rem;
  }
}

@media (min-width: 1000px) {
  .profile-wrapper {
    gap: 2.5rem;
  }

  .reviews-section {
    padding: 2rem;
  }
}

</style>

==================================================

FILE: frontend\src\views\RegisterView.vue
--------------------
<template>
  <div class="app" role="application" aria-label="Piattaforma prenotazioni ripetizioni">
    <AppHeader @toggle-theme="toggleTheme" />

    <main class="access-container" role="main" aria-labelledby="registerTitle">
      <section class="access-card">
        <h2 id="registerTitle">Crea il tuo account</h2>
        <form @submit.prevent="handleSubmit" novalidate>
          <div class="form-group centered-group">
            <div class="profile-pic-wrapper">
              <img
                :src="photoPreview || defaultPhoto"
                alt="Anteprima profilo"
                class="profile-pic"
              />
              <label for="photo" class="edit-icon" title="Carica immagine">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                </svg>
              </label>
              <input type="file" id="photo" accept="image/*" @change="onFileChange" hidden />
            </div>
            <span class="secondary-text small-text">Foto profilo (opzionale)</span>
          </div>
          <div class="form-group">
            <label for="firstName">Nome *</label>
            <input v-model.trim="form.firstName" type="text" id="firstName" required />
          </div>

          <div class="form-group">
            <label for="lastName">Cognome *</label>
            <input v-model.trim="form.lastName" type="text" id="lastName" required />
          </div>

          <div class="form-group">
            <label for="email">Email istituzionale *</label>
            <input
              v-model.trim="form.email"
              type="email"
              id="email"
              placeholder="nome.cognome@studio.unibo.it"
              required
              :class="{ error: errors.email }"
            />
          </div>

          <div class="form-group password-group">
            <label for="password">Password *</label>
            <div class="password-wrapper">
              <input
                :type="showPassword ? 'text' : 'password'"
                v-model="form.password"
                id="password"
                minlength="6"
                required
                :class="{ error: errors.password }"
              />
              <button type="button" class="password-toggle" @click="togglePassword" aria-label="Mostra password">
                <svg v-if="!showPassword" class="icon eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
                <svg v-else class="icon eye-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M17.94 17.94A10.1 10.1 0 0 1 12 20c-7 0-11-8-11-8a18.5 18.5 0 0 1 5.06-5.06"/>
                  <path d="M1 1l22 22"/>
                  <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label for="degreeType">Tipo di corso *</label>
            <select v-model="form.degreeType" id="degreeType" required>
              <option value="">Seleziona...</option>
              <option value="triennale">Triennale</option>
              <option value="magistrale">Magistrale</option>
              <option value="dottorato">Dottorato</option>
            </select>
          </div>

          <hr aria-hidden="true" />

          <div class="form-group">
            <label for="birthDate">Data di nascita (opzionale)</label>
            <input v-model="form.birthDate" type="date" id="birthDate" :class="{ error: errors.birthDate }"/>
          </div>

          <div class="form-group">
            <label for="averageGrade">Media universitaria (opzionale)</label>
            <input v-model.number="form.averageGrade" type="number" id="averageGrade" min="18" max="30" step="0.1" :class="{ error: errors.averageGrade }" />         
          </div>

          <div class="form-group">
            <label for="bio">Breve bio (opzionale)</label>
            <textarea
              v-model="form.bio"
              id="bio"
              rows="3"
              maxlength="200"
              placeholder="Scrivi una breve presentazione..."
            ></textarea>
          </div>

          <button type="submit" class="btn-primary-large">Iscriviti</button>
          <p class="secondary-text">
            Hai già un account?
            <RouterLink to="/login">Accedi</RouterLink>
          </p>
        </form>
      </section>
    </main>

    <ToastNotification v-if="toast.visible" :message="toast.message" @close="toast.visible = false" />
  </div>
</template>

<script setup>
import { ref, reactive, nextTick } from 'vue'
import { useRouter } from 'vue-router'
import AppHeader from '@/components/AppHeader.vue'
import ToastNotification from '@/components/ToastNotification.vue'
import useDarkMode from '@/composables/useDarkMode.js'
import '@/assets/styles/access-page.css'
import defaultPhotoPath from '@/assets/images/user.png'
import { login, toBase64 } from '@/composables/auth'
import { inject } from "vue";
import { getCurrentUser } from '@/composables/auth'
const socket = inject("socket");

const { toggleTheme } = useDarkMode()
const router = useRouter()
const defaultPhoto = defaultPhotoPath
const photoPreview = ref(null)
const form = reactive({
  firstName: '',
  lastName: '',
  email: '',
  password: '',
  degreeType: '',
  photo: null,
  birthDate: '',
  averageGrade: null,
  bio: ''
})

const showPassword = ref(false)
function togglePassword() {
  showPassword.value = !showPassword.value
}

const toast = reactive({ visible: false, message: '' })
let toastTimeout
function showToast(message) {
  toast.message = message
  toast.visible = true
  clearTimeout(toastTimeout)
  toastTimeout = setTimeout(() => (toast.visible = false), 3000)
}

const errors = reactive({ email: false, password: false, birthDate: false, averageGrade: false })

function showFieldError(field) {
  errors[field] = true
  nextTick(() => {
    const inputEl = document.getElementById(field)
    if (!inputEl) return
    inputEl.classList.add('shake')
    inputEl.addEventListener('animationend', () => inputEl.classList.remove('shake'), { once: true })
    inputEl.addEventListener('input', () => (errors[field] = false), { once: true })
  })
}

function onFileChange(e) {
  const file = e.target.files[0]
  if (file) {
    form.photo = file
    photoPreview.value = URL.createObjectURL(file)
  }
}

async function handleSubmit() {
  errors.email = false
  errors.password = false
  errors.birthDate = false

  const emailValid = form.email.endsWith('@studio.unibo.it')
  const passwordValid = /^(?=.*[0-9]).{6,}$/.test(form.password)
  
  let birthDateValid = true
  if (form.birthDate) {
    const today = new Date()
    const birthDate = new Date(form.birthDate)
    let age = today.getFullYear() - birthDate.getFullYear()
    const m = today.getMonth() - birthDate.getMonth()
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
      age--
    }
    if (age < 18) birthDateValid = false
  }

  let averageGradeValid = true
  if (form.averageGrade) {
    if (form.averageGrade < 18 || form.averageGrade > 30) {
      averageGradeValid = false
    }
  }

  if (!averageGradeValid) {
    showFieldError('averageGrade')
    showToast('❌ La media deve essere compresa tra 18 e 30')
  }

  if (!birthDateValid) {
    showFieldError('birthDate')
    showToast('❌ Devi essere maggiorenne per registrarti')
  }

  if (!passwordValid) {
    showFieldError('password')
    showToast('❌ La password deve avere almeno 6 caratteri e includere un numero')
  }

  if (!emailValid) {
    showFieldError('email')
    showToast('❌ Usa la tua email istituzionale @studio.unibo.it')
  }

  if (!emailValid || !passwordValid || !birthDateValid || !averageGradeValid) return

  const photoBase64 = form.photo ? await toBase64(form.photo) : null;
  
  const payload = { ...form, photo: photoBase64 }

  socket.emit("user:register", payload, (response) => {
    if (!response.success) {
      showToast("❌ " + response.error)
      return
    }

    socket.emit("session:login", { email: form.email, password: form.password }, (res) => {
      if (!res.success) {
        showToast("⚠️ Registrato ma non loggato: " + res.error)
        return
      }

      login(res.data) 
      showToast("✅ Registrazione completata con successo!")
      setTimeout(() => router.push("/"), 500)
    })
  })
}
</script>

<style scoped>
  .centered-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 1.5rem;
}

.profile-pic-wrapper {
  position: relative;
  width: 85px;
  height: 85px;
  margin-bottom: 0.5rem;
}

.profile-pic {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid var(--accent);
  box-shadow: var(--shadow-sm);
  background-color: var(--bg);
}

.edit-icon {
  position: absolute;
  bottom: 0;
  right: 0;
  background: var(--accent);
  color: white;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.edit-icon:hover {
  background: var(--accent-hover);
  transform: scale(1.1);
}

.small-text {
  font-size: 0.8rem;
  margin-top: 0.2rem;
  opacity: 0.8;
}
</style>


==================================================

FILE: frontend\src\views\ReporterView.vue
--------------------
<template>
  <main class="content" role="main" aria-labelledby="mainTitle">
    <div class="content-header">
      <h2 id="mainTitle">Segnalazioni aperte</h2>
    </div>

    <section class="results" id="reportsList">
      <ReportCard
        v-for="report in reports"
        :key="report._id"
        :report="report"
        @delete-report="deleteReport"
        v-if="reports.length > 0"
      />
      <div v-else class="empty-state" role="status" aria-live="polite">
        <div class="empty-illustration">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="empty-title">Tutto tranquillo!</h3>
        <p class="empty-text">Non ci sono segnalazioni aperte al momento.</p>
      </div>
    </section>
  </main>

</template>

<script setup>
import { ref, onMounted, onUnmounted, inject } from 'vue'
import ReportCard from '@/components/ReportCard.vue'
import { getCurrentUser } from '../composables/auth';
const emit = defineEmits(['show-toast']);
const socket = inject("socket");
const reports = ref([]);

onMounted(() => {

  socket.emit("report:getOpen", getCurrentUser().value.email);

  socket.on("report:open", (report) => {
    reports.value = report;
  });

  socket.on("report:updated", () => {
    socket.emit("report:getOpen", getCurrentUser().value.email);
  });
});

onUnmounted(() => {
  socket.off("report:open");
  socket.off("report:updated");
});

function deleteReport(report) {
  socket.emit("report:delete",getCurrentUser().value.email, report._id, (response) => {
    if (!response.success) {
      console.error("Errore durante l'eliminazione del report:", response.error);
      return;
    }else {
      emit('show-toast', '✅ Report eliminato correttamente!');
    }
  });
}

</script>

<style scoped>
main.content {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  width: 100%;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card);
  padding: .75rem 1rem;
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 4rem;
  z-index: 900;
  flex-wrap: wrap;
}

.filters-row {
  display: flex;
  gap: .5rem;
  align-items: center;
  flex-wrap: wrap;
}

.results {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding: 0 1rem 1rem;
}


@media (min-width: 880px) {
  .results {
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  }

}

.empty-state {
  grid-column: 1 / -1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4rem 1rem;
  text-align: center;
  color: var(--muted);
}

.empty-illustration svg {
  width: 80px;
  height: 80px;
  margin-bottom: 1.5rem;
  color: var(--primary); 
  opacity: 0.8;
}

.empty-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.empty-text {
  font-size: 0.95rem;
  max-width: 400px;
  line-height: 1.5;
  opacity: 0.8;
}

.empty-icon {
  font-size: 2.2rem;
}

.empty-title {
  font-size: 1.15rem;
  font-weight: 600;
  margin: 0;
}


.empty-state .btn {
  margin-top: .5rem;
}



</style>


==================================================

